<mxfile host="app.diagrams.net" modified="2024-07-02T12:38:16.515Z" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/126.0.0.0 Safari/537.36" etag="pilzOMuEOXP6uvESIsmA" version="24.6.4" type="github" pages="9">
  <diagram name="计分系统" id="CWwmlCPiOaKa8b5ezwnc">
    <mxGraphModel dx="4733" dy="2349" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="iWwTwwcAO4Awf_NSYGKX-15" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="iWwTwwcAO4Awf_NSYGKX-1" target="iWwTwwcAO4Awf_NSYGKX-14" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="iWwTwwcAO4Awf_NSYGKX-1" value="CommonWar" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="15" y="-110" width="130" height="50" as="geometry" />
        </mxCell>
        <mxCell id="iWwTwwcAO4Awf_NSYGKX-8" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="iWwTwwcAO4Awf_NSYGKX-2" target="iWwTwwcAO4Awf_NSYGKX-7" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="iWwTwwcAO4Awf_NSYGKX-13" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="iWwTwwcAO4Awf_NSYGKX-2" target="iWwTwwcAO4Awf_NSYGKX-10" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="310" y="490" />
              <mxPoint x="310" y="640" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="iWwTwwcAO4Awf_NSYGKX-2" value="ScoringSystem" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="360" y="410" width="130" height="80" as="geometry" />
        </mxCell>
        <mxCell id="iWwTwwcAO4Awf_NSYGKX-9" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="iWwTwwcAO4Awf_NSYGKX-4" target="iWwTwwcAO4Awf_NSYGKX-7" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="215" y="550" />
              <mxPoint x="515" y="550" />
              <mxPoint x="515" y="656" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="iWwTwwcAO4Awf_NSYGKX-11" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.25;entryY=0;entryDx=0;entryDy=0;" parent="1" source="iWwTwwcAO4Awf_NSYGKX-4" target="iWwTwwcAO4Awf_NSYGKX-10" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="iWwTwwcAO4Awf_NSYGKX-4" value="IScoringSystem" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="155" y="420" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="iWwTwwcAO4Awf_NSYGKX-6" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="iWwTwwcAO4Awf_NSYGKX-5" target="iWwTwwcAO4Awf_NSYGKX-4" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="iWwTwwcAO4Awf_NSYGKX-5" value="IWarModule(Interface)" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="140" y="240" width="150" height="70" as="geometry" />
        </mxCell>
        <mxCell id="iWwTwwcAO4Awf_NSYGKX-7" value="ScoringSystemServer" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="650" y="621" width="140" height="70" as="geometry" />
        </mxCell>
        <mxCell id="wceI3PTu90aBbahXaLu5-30" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="iWwTwwcAO4Awf_NSYGKX-10" target="wceI3PTu90aBbahXaLu5-29" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="155" y="760" />
              <mxPoint x="-80" y="760" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="wceI3PTu90aBbahXaLu5-32" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="iWwTwwcAO4Awf_NSYGKX-10" target="wceI3PTu90aBbahXaLu5-31" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="wceI3PTu90aBbahXaLu5-34" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="iWwTwwcAO4Awf_NSYGKX-10" target="wceI3PTu90aBbahXaLu5-33" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="wceI3PTu90aBbahXaLu5-36" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="iWwTwwcAO4Awf_NSYGKX-10" target="wceI3PTu90aBbahXaLu5-35" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="155" y="760" />
              <mxPoint x="410" y="760" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="wceI3PTu90aBbahXaLu5-38" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="iWwTwwcAO4Awf_NSYGKX-10" target="wceI3PTu90aBbahXaLu5-37" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="wceI3PTu90aBbahXaLu5-40" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="iWwTwwcAO4Awf_NSYGKX-10" target="wceI3PTu90aBbahXaLu5-39" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="34WkFXpUERWU9rlC2Q1b-34" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="iWwTwwcAO4Awf_NSYGKX-10" target="iWwTwwcAO4Awf_NSYGKX-19" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="iWwTwwcAO4Awf_NSYGKX-10" value="ScoringSystemClient" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="95" y="610" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="iWwTwwcAO4Awf_NSYGKX-17" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="iWwTwwcAO4Awf_NSYGKX-14" target="iWwTwwcAO4Awf_NSYGKX-16" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="iWwTwwcAO4Awf_NSYGKX-14" value="ServerWar" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="20" y="-30" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="iWwTwwcAO4Awf_NSYGKX-16" value="ServerWarSinglePlay&lt;br&gt;&lt;br&gt;&lt;br&gt;scoringSystemServer = new ScoringSystemServer();" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-52.5" y="80" width="265" height="130" as="geometry" />
        </mxCell>
        <mxCell id="iWwTwwcAO4Awf_NSYGKX-19" value="C2SClientProtocol" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-220" y="350" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="wceI3PTu90aBbahXaLu5-1" value="&lt;span style=&quot;color: rgb(235, 209, 183); font-family: &amp;quot;PT Sans&amp;quot;, sans-serif; font-size: 15.1111px; text-align: start; white-space-collapse: preserve; background-color: rgb(54, 49, 44);&quot;&gt;ClientBuffMananger&lt;/span&gt;" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="700" y="30" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="wceI3PTu90aBbahXaLu5-2" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="wceI3PTu90aBbahXaLu5-3" target="wceI3PTu90aBbahXaLu5-1" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="wceI3PTu90aBbahXaLu5-9" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="wceI3PTu90aBbahXaLu5-3" target="wceI3PTu90aBbahXaLu5-8" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="wceI3PTu90aBbahXaLu5-3" value="BuffManager" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="800" y="-120" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="wceI3PTu90aBbahXaLu5-4" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="wceI3PTu90aBbahXaLu5-5" target="wceI3PTu90aBbahXaLu5-3" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="wceI3PTu90aBbahXaLu5-5" value="WarModule" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="790" y="-240" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="wceI3PTu90aBbahXaLu5-6" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="wceI3PTu90aBbahXaLu5-7" target="wceI3PTu90aBbahXaLu5-5" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="wceI3PTu90aBbahXaLu5-12" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="wceI3PTu90aBbahXaLu5-7" target="wceI3PTu90aBbahXaLu5-11" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="wceI3PTu90aBbahXaLu5-7" value="IWarModule" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="780" y="-390" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="wceI3PTu90aBbahXaLu5-8" value="ServerBuffManager" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="900" y="30" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="wceI3PTu90aBbahXaLu5-20" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="wceI3PTu90aBbahXaLu5-10" target="wceI3PTu90aBbahXaLu5-19" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="2265" y="470" />
              <mxPoint x="2620" y="470" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="wceI3PTu90aBbahXaLu5-43" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" target="wceI3PTu90aBbahXaLu5-42" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="2265" y="460" as="sourcePoint" />
            <mxPoint x="1715" y="509" as="targetPoint" />
            <Array as="points">
              <mxPoint x="2265" y="469" />
              <mxPoint x="1875" y="469" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="wceI3PTu90aBbahXaLu5-10" value="CommWar&lt;br&gt;&lt;br&gt;&lt;br&gt;public DropManager&lt;br&gt;&lt;div&gt;public ScoringSystem scoringSystem&lt;/div&gt;" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2110" y="341" width="310" height="110" as="geometry" />
        </mxCell>
        <mxCell id="wceI3PTu90aBbahXaLu5-15" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="wceI3PTu90aBbahXaLu5-11" target="wceI3PTu90aBbahXaLu5-14" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="wceI3PTu90aBbahXaLu5-11" value="DropManager" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1190" y="-120" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="wceI3PTu90aBbahXaLu5-14" value="ServerDropManager" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1320" y="20" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="wceI3PTu90aBbahXaLu5-17" value="ServerSoDeadInfluenceModule&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; private ServerWar _serverWar;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; private ServerDropManager _dropManager;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2180" y="791" width="330" height="100" as="geometry" />
        </mxCell>
        <mxCell id="wceI3PTu90aBbahXaLu5-21" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="wceI3PTu90aBbahXaLu5-19" target="wceI3PTu90aBbahXaLu5-17" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="wceI3PTu90aBbahXaLu5-23" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="wceI3PTu90aBbahXaLu5-19" target="wceI3PTu90aBbahXaLu5-22" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="wceI3PTu90aBbahXaLu5-26" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="wceI3PTu90aBbahXaLu5-19" target="wceI3PTu90aBbahXaLu5-25" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="wceI3PTu90aBbahXaLu5-28" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="wceI3PTu90aBbahXaLu5-19" target="wceI3PTu90aBbahXaLu5-27" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="wceI3PTu90aBbahXaLu5-19" value="ServerWar" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2330" y="491" width="580" height="60" as="geometry" />
        </mxCell>
        <mxCell id="wceI3PTu90aBbahXaLu5-22" value="SceneServerCommon\&lt;div&gt;BattleStatistics&lt;/div&gt;" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2610" y="791" width="130" height="80" as="geometry" />
        </mxCell>
        <mxCell id="wceI3PTu90aBbahXaLu5-25" value="ServerGmModule" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2760" y="791" width="140" height="60" as="geometry" />
        </mxCell>
        <mxCell id="wceI3PTu90aBbahXaLu5-27" value="WarSettleStage" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2960" y="791" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="wceI3PTu90aBbahXaLu5-29" value="ShortTimeProtocolRecorder" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-330" y="860" width="190" height="60" as="geometry" />
        </mxCell>
        <mxCell id="wceI3PTu90aBbahXaLu5-31" value="ClientWar" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="35" y="850" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="wceI3PTu90aBbahXaLu5-33" value="ClientWarWorld" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="210" y="850" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="wceI3PTu90aBbahXaLu5-35" value="ClientRoundModule" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="350" y="850" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="wceI3PTu90aBbahXaLu5-37" value="BattleScore-&amp;gt;ScoreModule" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-380" y="720" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="wceI3PTu90aBbahXaLu5-39" value="BattleStatisticsModule" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-560" y="551" width="130" height="60" as="geometry" />
        </mxCell>
        <mxCell id="wceI3PTu90aBbahXaLu5-41" value="修改后的继承关系" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="2220" y="269" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="34WkFXpUERWU9rlC2Q1b-29" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="wceI3PTu90aBbahXaLu5-42" target="34WkFXpUERWU9rlC2Q1b-28" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="wceI3PTu90aBbahXaLu5-42" value="ClientWar" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1640" y="530" width="470" height="59" as="geometry" />
        </mxCell>
        <mxCell id="wceI3PTu90aBbahXaLu5-48" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="wceI3PTu90aBbahXaLu5-44" target="wceI3PTu90aBbahXaLu5-47" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="wceI3PTu90aBbahXaLu5-44" value="ClientWarWorld" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-350" y="1280" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="wceI3PTu90aBbahXaLu5-46" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="wceI3PTu90aBbahXaLu5-45" target="wceI3PTu90aBbahXaLu5-44" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="wceI3PTu90aBbahXaLu5-45" value="WarWorld" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-350" y="1150" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="wceI3PTu90aBbahXaLu5-47" value="在这里实现单例的初始化和反初始化" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-350" y="1420" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="34WkFXpUERWU9rlC2Q1b-2" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="34WkFXpUERWU9rlC2Q1b-1" target="34WkFXpUERWU9rlC2Q1b-5" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="-1565" y="532" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="34WkFXpUERWU9rlC2Q1b-44" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="34WkFXpUERWU9rlC2Q1b-1" target="34WkFXpUERWU9rlC2Q1b-43" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="34WkFXpUERWU9rlC2Q1b-1" value="GameModule&amp;lt;BattleStatisticsModule&amp;gt;" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-1530" y="341" width="280" height="80" as="geometry" />
        </mxCell>
        <mxCell id="34WkFXpUERWU9rlC2Q1b-4" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="34WkFXpUERWU9rlC2Q1b-3" target="34WkFXpUERWU9rlC2Q1b-1" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="34WkFXpUERWU9rlC2Q1b-3" value="ModuleBase" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-1450" y="210" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="34WkFXpUERWU9rlC2Q1b-7" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="34WkFXpUERWU9rlC2Q1b-5" target="34WkFXpUERWU9rlC2Q1b-6" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="34WkFXpUERWU9rlC2Q1b-5" value="BattleStatisticsModule&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;单例&lt;/div&gt;" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-1630" y="541" width="180" height="80" as="geometry" />
        </mxCell>
        <mxCell id="34WkFXpUERWU9rlC2Q1b-6" value="GameModuleManage&lt;span style=&quot;background-color: initial;&quot;&gt;r&lt;/span&gt;&lt;div&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;Init() {&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;AddModule() }&lt;/span&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-1515" y="720" width="250" height="80" as="geometry" />
        </mxCell>
        <mxCell id="34WkFXpUERWU9rlC2Q1b-16" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="34WkFXpUERWU9rlC2Q1b-8" target="34WkFXpUERWU9rlC2Q1b-15" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="34WkFXpUERWU9rlC2Q1b-8" value="GameModuleManage&lt;span style=&quot;background-color: initial;&quot;&gt;r&lt;/span&gt;" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-1330" y="1340" width="160" height="80" as="geometry" />
        </mxCell>
        <mxCell id="34WkFXpUERWU9rlC2Q1b-11" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="34WkFXpUERWU9rlC2Q1b-10" target="34WkFXpUERWU9rlC2Q1b-8" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="34WkFXpUERWU9rlC2Q1b-10" value="IClientStandardModule" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-1335" y="1220" width="170" height="60" as="geometry" />
        </mxCell>
        <mxCell id="34WkFXpUERWU9rlC2Q1b-19" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="34WkFXpUERWU9rlC2Q1b-12" target="34WkFXpUERWU9rlC2Q1b-18" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="34WkFXpUERWU9rlC2Q1b-12" value="KClientManager" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-1870" y="1880" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="34WkFXpUERWU9rlC2Q1b-14" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="34WkFXpUERWU9rlC2Q1b-13" target="34WkFXpUERWU9rlC2Q1b-12" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="34WkFXpUERWU9rlC2Q1b-13" value="Singleton&amp;lt;KClientManager&amp;gt;" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-1890" y="1760" width="160" height="60" as="geometry" />
        </mxCell>
        <mxCell id="34WkFXpUERWU9rlC2Q1b-15" value="KClientManager&lt;div&gt;Init(){&lt;/div&gt;&lt;div&gt;KEngine.Instance.RegisterModule(new GameModuleManager());&lt;br&gt;&lt;/div&gt;&lt;div&gt;}&lt;/div&gt;" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-1452.5" y="1480" width="405" height="70" as="geometry" />
        </mxCell>
        <mxCell id="34WkFXpUERWU9rlC2Q1b-18" value="GameClient&lt;div&gt;Init()&lt;/div&gt;&lt;div&gt;{&lt;/div&gt;&lt;div&gt;KClientManager.instance.Init(settings);&lt;br&gt;&lt;/div&gt;&lt;div&gt;}&lt;/div&gt;" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-1925" y="1970" width="230" height="90" as="geometry" />
        </mxCell>
        <mxCell id="34WkFXpUERWU9rlC2Q1b-31" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="34WkFXpUERWU9rlC2Q1b-28" target="34WkFXpUERWU9rlC2Q1b-30" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="34WkFXpUERWU9rlC2Q1b-28" value="ClientWarScene&lt;div&gt;public ClientWar clientWar;&lt;br&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1792.5" y="650" width="165" height="40" as="geometry" />
        </mxCell>
        <mxCell id="34WkFXpUERWU9rlC2Q1b-33" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="34WkFXpUERWU9rlC2Q1b-30" target="34WkFXpUERWU9rlC2Q1b-32" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="34WkFXpUERWU9rlC2Q1b-30" value="ClientWarWorld&lt;div&gt;public ClientWarScene clientWarScene;&lt;br&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1742.5" y="730" width="265" height="80" as="geometry" />
        </mxCell>
        <mxCell id="34WkFXpUERWU9rlC2Q1b-32" value="WarClient&lt;div&gt;public ClientWarWorld clientWarWorld;&lt;br&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1760" y="841" width="230" height="60" as="geometry" />
        </mxCell>
        <mxCell id="34WkFXpUERWU9rlC2Q1b-39" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="34WkFXpUERWU9rlC2Q1b-36" target="34WkFXpUERWU9rlC2Q1b-38" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="34WkFXpUERWU9rlC2Q1b-40" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="34WkFXpUERWU9rlC2Q1b-36" target="34WkFXpUERWU9rlC2Q1b-37" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1170" y="1090" />
              <mxPoint x="925" y="1090" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="34WkFXpUERWU9rlC2Q1b-36" value="WarClient" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1110" y="1000" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="34WkFXpUERWU9rlC2Q1b-37" value="&lt;div&gt;GameReplayLogic&lt;/div&gt;&lt;div&gt;OnEnter() {&lt;br&gt;&lt;/div&gt;WarClient.instance.Init();&lt;div&gt;}&lt;/div&gt;" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="830" y="1130" width="190" height="70" as="geometry" />
        </mxCell>
        <mxCell id="34WkFXpUERWU9rlC2Q1b-42" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="34WkFXpUERWU9rlC2Q1b-38" target="34WkFXpUERWU9rlC2Q1b-41" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1300" y="1240" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="34WkFXpUERWU9rlC2Q1b-38" value="ClientGamePlay&lt;div&gt;EnterWar() {&lt;br&gt;&lt;/div&gt;&lt;div&gt;WarClient.instance.Init();&lt;br&gt;&lt;/div&gt;&lt;div&gt;}&lt;/div&gt;" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1210" y="1125" width="180" height="80" as="geometry" />
        </mxCell>
        <mxCell id="34WkFXpUERWU9rlC2Q1b-41" value="GameplayLogic&lt;div&gt;OnEnter() -&amp;gt;&lt;/div&gt;&lt;div&gt;配置表加载完成后 -&amp;gt;&lt;br&gt;&lt;div&gt;WaitConfigLoaded() {&lt;br&gt;&lt;/div&gt;&lt;div&gt;ClientGamePlay.instance.EnterWar();&lt;br&gt;&lt;/div&gt;&lt;div&gt;}&lt;/div&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1210" y="1290" width="230" height="110" as="geometry" />
        </mxCell>
        <mxCell id="34WkFXpUERWU9rlC2Q1b-45" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="34WkFXpUERWU9rlC2Q1b-43" target="34WkFXpUERWU9rlC2Q1b-6" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="34WkFXpUERWU9rlC2Q1b-43" value="ScoreModule" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-1325" y="540" width="170" height="70" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="660VQV9bjZOmXcSyOBNS" name="复活模块">
    <mxGraphModel dx="910" dy="2578" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="GRKTW9V1Ez2uVHqEE-KG-3" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="GRKTW9V1Ez2uVHqEE-KG-1" target="GRKTW9V1Ez2uVHqEE-KG-2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="GRKTW9V1Ez2uVHqEE-KG-5" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="GRKTW9V1Ez2uVHqEE-KG-1" target="GRKTW9V1Ez2uVHqEE-KG-4" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="GRKTW9V1Ez2uVHqEE-KG-7" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="GRKTW9V1Ez2uVHqEE-KG-1" target="GRKTW9V1Ez2uVHqEE-KG-6" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="670" y="460" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="GRKTW9V1Ez2uVHqEE-KG-1" value="DoUserSpawn&lt;div&gt;玩家复活3种形式&lt;/div&gt;&lt;div&gt;1. OB复活&lt;/div&gt;&lt;div&gt;2. 首次飞行员复活&lt;/div&gt;&lt;div&gt;3. 二次后使用机甲复活&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="290" y="410" width="180" height="100" as="geometry" />
        </mxCell>
        <mxCell id="GRKTW9V1Ez2uVHqEE-KG-2" value="&lt;div&gt;OB复活&lt;/div&gt;LaunchObserverById" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="140" y="660" width="160" height="70" as="geometry" />
        </mxCell>
        <mxCell id="GRKTW9V1Ez2uVHqEE-KG-4" value="&lt;div&gt;首次出生&lt;/div&gt;LaunchPilotById" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="400" y="660" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="GRKTW9V1Ez2uVHqEE-KG-11" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="GRKTW9V1Ez2uVHqEE-KG-6" target="GRKTW9V1Ez2uVHqEE-KG-10" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="782.5" y="715" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="GRKTW9V1Ez2uVHqEE-KG-6" value="机甲复活（二次）&lt;div&gt;LaunchMechaById&lt;br&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="780" y="585" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="GRKTW9V1Ez2uVHqEE-KG-10" value="1. 复活类型是切机甲则不走此流程&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;以下开始走正常的复活流程&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;div&gt;2.new 场景角色 NewSceneObject&lt;/div&gt;&lt;div&gt;3. 创建机甲&lt;/div&gt;&lt;div&gt;4. 创建机甲装备&lt;/div&gt;&lt;div&gt;5. 玩家身上添加驾驶员数据&lt;/div&gt;&lt;div&gt;6.移动到出生点&amp;nbsp;MovePlayerToBornPoint&lt;/div&gt;&lt;div&gt;7. 添加到场景里 AddSceneObject&lt;/div&gt;&lt;div&gt;8. 装备芯片增加属性&amp;nbsp;player.CreateCoreInServer();&lt;/div&gt;&lt;div&gt;9.&amp;nbsp;重置复活数据并广播同步&lt;/div&gt;&lt;/div&gt;&lt;div&gt;10.若是切换机甲，则没有出生点；若是队友买活则重置买活时间&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;11.&lt;b&gt;机甲复活事件ePlayerMechaRespawn&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;12.机甲状态切换为有机甲&lt;/div&gt;&lt;div&gt;13.记录上次复活时间_lastRespawnTick[userId]=Time&lt;/div&gt;&lt;div&gt;13. 同步背包数据&amp;nbsp;SyncBagData&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;" style="ellipse;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="617.5" y="720" width="445" height="370" as="geometry" />
        </mxCell>
        <mxCell id="GRKTW9V1Ez2uVHqEE-KG-12" value="&lt;div&gt;&amp;nbsp; &amp;nbsp; 复活类型&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; None = 0,&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; Spawn = 1, //出生&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; Respawn = 2, //自动复活&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; Switch = 3, //切换&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; GmAi = 4, //GM召唤的AI&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; UnHide = 5, //取消机甲隐藏&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; ChangeEquipments = 6,&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; SwitchMirror = 7, //切换分线&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; AssistRespawn = 8, //队友买活&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; BuyRespawn = 9, //自己买活&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; MirrorCrashed = 10, //分线&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; SwitchNotAirDrop = 11, // 不空投 切机甲&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; FromDataAi = 12, // 数据ai&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; }&lt;/div&gt;" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="390" y="-390" width="320" height="270" as="geometry" />
        </mxCell>
        <mxCell id="GRKTW9V1Ez2uVHqEE-KG-15" value="&lt;div&gt;驾驶员数据&lt;/div&gt;&lt;div&gt;message PILOT_DATA&lt;/div&gt;&lt;div&gt;{&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: normal;&quot;&gt;&lt;span style=&quot;white-space:pre&quot;&gt;&#x9;&lt;/span&gt;int32 pilot_template_ID = 1;&amp;nbsp;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: normal;&quot;&gt;&lt;span style=&quot;white-space:pre&quot;&gt;&#x9;&lt;/span&gt;int32 level = 2;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: normal;&quot;&gt;&lt;span style=&quot;white-space:pre&quot;&gt;&#x9;&lt;/span&gt;int32 experience = 3;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; int64 pilot_gain_time = 4;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; int64 pilot_available_time = 5;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: normal;&quot;&gt;&lt;span style=&quot;white-space:pre&quot;&gt;&#x9;&lt;/span&gt;bool temporary = 6;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; repeated PILOT_ABILITY over_limit_abilities = 7;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: normal;&quot;&gt;&lt;span style=&quot;white-space:pre&quot;&gt;&#x9;&lt;/span&gt;repeated int32 pilot_decorates = 8;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: normal;&quot;&gt;&lt;span style=&quot;white-space:pre&quot;&gt;&#x9;&lt;/span&gt;repeated int32 pilot_cloths = 9;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: normal;&quot;&gt;&lt;span style=&quot;white-space:pre&quot;&gt;&#x9;&lt;/span&gt;repeated PILOT_DIY_TEMPLATE diy_template_s = 10;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: normal;&quot;&gt;&lt;span style=&quot;white-space:pre&quot;&gt;&#x9;&lt;/span&gt;int32 select_diy_template_idx = 11;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; repeated DIY_ITEM_INFO pilot_paint_list&amp;nbsp; &amp;nbsp;=&amp;nbsp; &amp;nbsp; &amp;nbsp;12;//驾驶员diy数据&lt;/div&gt;&lt;div&gt;}&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="530" y="-50" width="400" height="250" as="geometry" />
        </mxCell>
        <mxCell id="GRKTW9V1Ez2uVHqEE-KG-19" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="GRKTW9V1Ez2uVHqEE-KG-16" target="GRKTW9V1Ez2uVHqEE-KG-17" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="GRKTW9V1Ez2uVHqEE-KG-16" value="ServerWarSpawnModule" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="40" y="20" width="320" height="70" as="geometry" />
        </mxCell>
        <mxCell id="GRKTW9V1Ez2uVHqEE-KG-17" value="ServerWarCommon&lt;div&gt;AddModule:&amp;nbsp;&lt;span style=&quot;background-color: initial;&quot;&gt;ServerWarSpawnModule&lt;/span&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="85" y="130" width="230" height="60" as="geometry" />
        </mxCell>
        <mxCell id="GRKTW9V1Ez2uVHqEE-KG-21" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="GRKTW9V1Ez2uVHqEE-KG-20" target="GRKTW9V1Ez2uVHqEE-KG-16" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="GRKTW9V1Ez2uVHqEE-KG-20" value="WarSpawnModule" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="140" y="-80" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="GRKTW9V1Ez2uVHqEE-KG-23" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="GRKTW9V1Ez2uVHqEE-KG-22" target="GRKTW9V1Ez2uVHqEE-KG-20" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="GRKTW9V1Ez2uVHqEE-KG-22" value="WarModule" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="140" y="-170" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="GRKTW9V1Ez2uVHqEE-KG-27" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="GRKTW9V1Ez2uVHqEE-KG-24" target="GRKTW9V1Ez2uVHqEE-KG-6" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="GRKTW9V1Ez2uVHqEE-KG-24" value="DoUserRespawn&lt;div&gt;二次&lt;span style=&quot;background-color: initial;&quot;&gt;复活&lt;/span&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1000" y="400" width="150" height="70" as="geometry" />
        </mxCell>
        <mxCell id="GRKTW9V1Ez2uVHqEE-KG-29" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="GRKTW9V1Ez2uVHqEE-KG-28" target="GRKTW9V1Ez2uVHqEE-KG-24" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="GRKTW9V1Ez2uVHqEE-KG-28" value="PrepareNextRespawn" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1007.5" y="290" width="135" height="60" as="geometry" />
        </mxCell>
        <mxCell id="GRKTW9V1Ez2uVHqEE-KG-32" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="GRKTW9V1Ez2uVHqEE-KG-31" target="GRKTW9V1Ez2uVHqEE-KG-28" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="GRKTW9V1Ez2uVHqEE-KG-31" value="OnPlayerDie" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1015" y="200" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="GRKTW9V1Ez2uVHqEE-KG-36" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="GRKTW9V1Ez2uVHqEE-KG-33" target="GRKTW9V1Ez2uVHqEE-KG-35" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="GRKTW9V1Ez2uVHqEE-KG-33" value="OnAssistRespawn&lt;div&gt;队友买活&lt;/div&gt;" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1330" y="200" width="160" height="70" as="geometry" />
        </mxCell>
        <mxCell id="GRKTW9V1Ez2uVHqEE-KG-37" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="GRKTW9V1Ez2uVHqEE-KG-34" target="GRKTW9V1Ez2uVHqEE-KG-35" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="GRKTW9V1Ez2uVHqEE-KG-34" value="MechaAIBase.&lt;span style=&quot;background-color: initial;&quot;&gt;AssistRespawn&lt;/span&gt;&lt;div&gt;&lt;div&gt;AI下队友买活&lt;/div&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1550" y="200" width="170" height="70" as="geometry" />
        </mxCell>
        <mxCell id="GRKTW9V1Ez2uVHqEE-KG-35" value="AssistRespawn&lt;div&gt;检测各种条件判断，复活阶段和时间等&lt;/div&gt;&lt;div&gt;CheckAndCostMemberRespawn 计算买活花费&lt;br&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1320" y="360" width="360" height="100" as="geometry" />
        </mxCell>
        <mxCell id="GRKTW9V1Ez2uVHqEE-KG-38" value="处决状态机&lt;div&gt;SoExecutionComponent&lt;br&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1330" y="820" width="270" height="80" as="geometry" />
        </mxCell>
        <mxCell id="GRKTW9V1Ez2uVHqEE-KG-39" value="SkillActionExecuteMecha&lt;div&gt;处决技能&lt;/div&gt;" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1730" y="830" width="210" height="60" as="geometry" />
        </mxCell>
        <mxCell id="8ZhbOmAN1mw3FXku5DQu-2" value="" style="edgeStyle=none;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;startSize=8;endSize=8;" parent="1" source="ol9IdXqjmtpI2yGcnYGj-1" target="8ZhbOmAN1mw3FXku5DQu-1" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ol9IdXqjmtpI2yGcnYGj-1" value="&lt;div&gt;&lt;b&gt;变量包含关系&lt;/b&gt;&lt;/div&gt;&lt;b&gt;SoStateData&lt;/b&gt;&lt;div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;&lt;/b&gt; public Dictionary&amp;lt;StateType, int&amp;gt; states = new Dictionary&amp;lt;StateType, int&amp;gt;();&lt;/div&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1995" y="2500" width="579" height="70" as="geometry" />
        </mxCell>
        <mxCell id="ol9IdXqjmtpI2yGcnYGj-3" value="" style="edgeStyle=none;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;startSize=8;endSize=8;" parent="1" source="ol9IdXqjmtpI2yGcnYGj-2" target="ol9IdXqjmtpI2yGcnYGj-1" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ol9IdXqjmtpI2yGcnYGj-2" value="&lt;div&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;变量包含关系&lt;/b&gt;&lt;br&gt;&lt;/div&gt;SoStateDataManagerBase&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; protected Dictionary&amp;lt;int, SoStateData&amp;gt; _soStateDatas = new Dictionary&amp;lt;int, &lt;b&gt;SoStateData&lt;/b&gt;&amp;gt;();&lt;/div&gt;&lt;/div&gt;&lt;div&gt;Key为玩家ID？&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2029.5" y="2370" width="530" height="100" as="geometry" />
        </mxCell>
        <mxCell id="ol9IdXqjmtpI2yGcnYGj-5" value="" style="edgeStyle=none;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;startSize=8;endSize=8;" parent="1" source="ol9IdXqjmtpI2yGcnYGj-4" target="ol9IdXqjmtpI2yGcnYGj-2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ol9IdXqjmtpI2yGcnYGj-4" value="WarModule 基类" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2224.5" y="2210" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="TSkOYfZsIgay2WD69a24-18" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="8ZhbOmAN1mw3FXku5DQu-1" target="TSkOYfZsIgay2WD69a24-17">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8ZhbOmAN1mw3FXku5DQu-1" value="&lt;div&gt;同步数据&lt;/div&gt;ServerSoStateDataManager.SyncExtraData(ExtraStateType extraStateType, List&amp;lt;SoStateData&amp;gt; stateDatas)&lt;div&gt;将list 里的所有玩家的&amp;nbsp;&lt;span style=&quot;background-color: initial;&quot;&gt;extraStateType 类型数据同步广播&lt;/span&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1432.5" y="2700" width="585" height="160" as="geometry" />
        </mxCell>
        <mxCell id="8ZhbOmAN1mw3FXku5DQu-3" value="&lt;div&gt;&amp;nbsp; &amp;nbsp; public enum StateType&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; [LabelText(&quot;无&quot;)]&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; None = 0,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; [LabelText(&quot;快捷标记&quot;)]&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; QuickMark = 1,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; [LabelText(&quot;隐藏图标&quot;)]&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; IconInvisible = 2,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; [LabelText(&quot;是否携带矿物&quot;)]&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; MineralOwner = 3,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; [LabelText(&quot;是否混乱状态&quot;)]&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; IsConfused = 4,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; [LabelText(&quot;推车NPC状态&quot;)]&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; DoublePushNpcState = 5,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; [LabelText(&quot;是否治疗&quot;)]&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; IsHeal = 6,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; [LabelText(&quot;是否携带旗帜&quot;)]&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; FlagOwner = 7,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; [LabelText(&quot;推车NPC进度(0~10000代表0%~100%)&quot;)]&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; DoublePushProcess = 8,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; [LabelText(&quot;是否正在雷达扫描&quot;)]&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; IsRadarScanning = 9,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; [LabelText(&quot;位于地下城内&quot;)]&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; InDungeon = 10,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; [LabelText(&quot;剩余使用次数&quot;)]&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; LifeCount = 11,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; [LabelText(&quot;被占领的势力Id&quot;)]&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; OccupyForceId = 12,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; [LabelText(&quot;占领的推车势力Id&quot;)]&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; OccupyDoublePushNpcForceId = 13,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; [LabelText(&quot;单位生命周期类型&quot;)]&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; LifeCycleType = 14,&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; }&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2760" y="-490" width="330" height="705" as="geometry" />
        </mxCell>
        <mxCell id="TSkOYfZsIgay2WD69a24-2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="TSkOYfZsIgay2WD69a24-1" target="8ZhbOmAN1mw3FXku5DQu-1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="TSkOYfZsIgay2WD69a24-1" value="&lt;div&gt;调用关系&lt;/div&gt;ServerSoStateDataManager.SyncExtraDataByType()" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1575" y="2380" width="300" height="140" as="geometry" />
        </mxCell>
        <mxCell id="TSkOYfZsIgay2WD69a24-4" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="TSkOYfZsIgay2WD69a24-3" target="TSkOYfZsIgay2WD69a24-1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="TSkOYfZsIgay2WD69a24-3" value="&lt;div&gt;每个类型的同步函数&lt;/div&gt;&lt;div&gt;OnExtraStateHealActsSyncTimer&lt;br&gt;&lt;/div&gt;OnExtraStateRadarRadiusSyncTimer()&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; {&lt;span style=&quot;background-color: initial;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;SyncExtraDataByType(ExtraStateType.RadarRadius);&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; }&lt;/div&gt;" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1510" y="2150" width="430" height="140" as="geometry" />
        </mxCell>
        <mxCell id="TSkOYfZsIgay2WD69a24-6" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="TSkOYfZsIgay2WD69a24-5" target="TSkOYfZsIgay2WD69a24-3">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="TSkOYfZsIgay2WD69a24-5" value="GenerateExtraStateDataSyncTimer&lt;div&gt;遍历所有的类型，将其加入同步的定时器&lt;/div&gt;" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1530" y="2010" width="390" height="60" as="geometry" />
        </mxCell>
        <mxCell id="TSkOYfZsIgay2WD69a24-7" value="MergeSoStateData&lt;div&gt;标点模块使用&lt;/div&gt;" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1910" y="1790" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="TSkOYfZsIgay2WD69a24-8" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.479;entryY=0.026;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="TSkOYfZsIgay2WD69a24-7" target="TSkOYfZsIgay2WD69a24-5">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="TSkOYfZsIgay2WD69a24-9" value="AddStateData&lt;div&gt;添加一个StateData&lt;/div&gt;&lt;div&gt;若还有额外数据extraStateTypes.Count &amp;gt; 0&lt;/div&gt;&lt;div&gt;则往下走&amp;nbsp;&lt;span style=&quot;background-color: initial;&quot;&gt;GenerateExtraStateDataSyncTimer&lt;/span&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1450" y="1780" width="260" height="100" as="geometry" />
        </mxCell>
        <mxCell id="TSkOYfZsIgay2WD69a24-10" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.223;entryY=0.041;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="TSkOYfZsIgay2WD69a24-9" target="TSkOYfZsIgay2WD69a24-5">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="TSkOYfZsIgay2WD69a24-12" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="TSkOYfZsIgay2WD69a24-11" target="TSkOYfZsIgay2WD69a24-9">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="TSkOYfZsIgay2WD69a24-11" value="CreateOrAddSoStateData" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1360" y="1590" width="170" height="90" as="geometry" />
        </mxCell>
        <mxCell id="TSkOYfZsIgay2WD69a24-13" value="OnSoStateDataCreate" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1670" y="1590" width="150" height="80" as="geometry" />
        </mxCell>
        <mxCell id="TSkOYfZsIgay2WD69a24-14" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.806;entryY=-0.015;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="TSkOYfZsIgay2WD69a24-13" target="TSkOYfZsIgay2WD69a24-9">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="TSkOYfZsIgay2WD69a24-16" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="TSkOYfZsIgay2WD69a24-15" target="TSkOYfZsIgay2WD69a24-11">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="TSkOYfZsIgay2WD69a24-15" value="ServerQuickMarkModule.OnClientRequestCreateMark()&lt;div&gt;[标记模块] 客户端发起标记&lt;br&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1287.5" y="1430" width="315" height="70" as="geometry" />
        </mxCell>
        <mxCell id="TSkOYfZsIgay2WD69a24-20" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="TSkOYfZsIgay2WD69a24-17" target="TSkOYfZsIgay2WD69a24-19">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="TSkOYfZsIgay2WD69a24-17" value="DoBroadcastStateExtraDataChange&lt;div&gt;广播变更的字段&lt;/div&gt;&lt;div&gt;S2C_PROTOCOL.S2CSoStateExtraDataChange&lt;br&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1580" y="2930" width="290" height="90" as="geometry" />
        </mxCell>
        <mxCell id="TSkOYfZsIgay2WD69a24-19" value="C2SClientProtocol.OnStateExtraDataChange&lt;div&gt;将协议变量保存到本地，并做相应表现&lt;/div&gt;" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1585" y="3110" width="280" height="70" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="inUgT6fnLxOBwQptTbOi" name="天气模块">
    <mxGraphModel dx="3291" dy="2349" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="7STc2YbkeW5kZMqmHtm8-5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="7STc2YbkeW5kZMqmHtm8-1" target="7STc2YbkeW5kZMqmHtm8-4" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="7STc2YbkeW5kZMqmHtm8-7" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="7STc2YbkeW5kZMqmHtm8-1" target="7STc2YbkeW5kZMqmHtm8-6" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Xy02D-rM18JvdIoiQVGx-2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="7STc2YbkeW5kZMqmHtm8-1" target="Xy02D-rM18JvdIoiQVGx-1" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="7STc2YbkeW5kZMqmHtm8-1" value="&lt;b&gt;Server&lt;/b&gt;MarshmackWeatherModule. CreateWeather&lt;div&gt;1. 读配置创建天气数据 CreateWeatherData&amp;nbsp;&lt;br&gt;&lt;/div&gt;&lt;div&gt;2. 先创建龙卷风（也是一个天气数据）&lt;/div&gt;&lt;div&gt;InitWeather&lt;/div&gt;&lt;div&gt;3. 再创建毒圈 （&lt;span style=&quot;background-color: initial;&quot;&gt;天气数据）&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;InitWeather&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;FIxWeather&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="200" y="415" width="440" height="340" as="geometry" />
        </mxCell>
        <mxCell id="7STc2YbkeW5kZMqmHtm8-2" value="&lt;div&gt;&lt;b&gt;天气数据&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; public class WeatherData&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; public bool isSynced = false;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; public readonly int id = 0; //实例Id&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; public readonly int weatherId = 0;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; public readonly uint deBuffId = 0;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; public readonly int npcDeBuffId = 0;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; public float spawnTime = 0;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; public readonly bool isStartBeforeCount = false;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; public bool forceCheckNpc = false;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; public bool isFixed = false; // 是否是变速的&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; public bool isWaitingUnfix = false;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; public float unfixSpeed = 0f;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; public float stormAheadTime;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; public int stormId;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; /// &amp;lt;summary&amp;gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; /// 是否为龙卷风&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; /// &amp;lt;/summary&amp;gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; public bool isStorm;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="740" y="-20" width="440" height="415" as="geometry" />
        </mxCell>
        <mxCell id="7STc2YbkeW5kZMqmHtm8-3" value="天气模块基类&lt;div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; public class MarshmackWeatherModule : WarModule&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; protected int weatherRoundId = int.MinValue;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; protected List&amp;lt;WeatherData&amp;gt; weathers = new List&amp;lt;WeatherData&amp;gt;();&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; protected Dictionary&amp;lt;int, int&amp;gt; weatherId2StormId = new Dictionary&amp;lt;int, int&amp;gt;(); // 天气实例Id对应的龙卷风实例Id&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; //配置Id和对应的天气实例Id&amp;nbsp; &amp;nbsp;注:目前是不允许一个配置创建多个天气势力 龙卷风除外&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; protected Dictionary&amp;lt;int, int&amp;gt; weatherConfigId2InstanceId = new Dictionary&amp;lt;int, int&amp;gt;();&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; protected Dictionary&amp;lt;int, WeatherData&amp;gt; instanceId2Data = new Dictionary&amp;lt;int, WeatherData&amp;gt;();&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; protected Dictionary&amp;lt;int, KibbleNpcData&amp;gt; kibbleNpcDic = new Dictionary&amp;lt;int, KibbleNpcData&amp;gt;();&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-10" y="-80" width="590" height="270" as="geometry" />
        </mxCell>
        <mxCell id="Xy02D-rM18JvdIoiQVGx-5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.25;entryY=0;entryDx=0;entryDy=0;" parent="1" source="7STc2YbkeW5kZMqmHtm8-4" target="Xy02D-rM18JvdIoiQVGx-4" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="7STc2YbkeW5kZMqmHtm8-4" value="InitWeather&lt;div&gt;1. isFixed = 恢复到最大阶段，（最终最大和提早最大都是有这个标记）则判断是否需要叠加扩大&lt;/div&gt;&lt;div&gt;2. 判断是否需要叠加扩大的标记为&lt;b&gt;isWaitingUnfix&lt;/b&gt;(需要最终最大），若需要再次扩大则设置fixedLife**配置。&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;3. 若还没到最终最大或者提早最大，则视为刚出生，把每个阶段的tick时间加入&lt;b&gt;originalTick&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;函数功能：安排好接下来阶段的变化tick&lt;/div&gt;" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-110" y="910" width="440" height="210" as="geometry" />
        </mxCell>
        <mxCell id="7STc2YbkeW5kZMqmHtm8-6" value="&lt;div&gt;创建天气数据&lt;/div&gt;CreateWeatherData&lt;div&gt;会保存所有阶段的绝对时间和大小&lt;/div&gt;&lt;div&gt;后续tick中直接拿来对比时间&lt;/div&gt;" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-200" y="515" width="250" height="140" as="geometry" />
        </mxCell>
        <mxCell id="Xy02D-rM18JvdIoiQVGx-6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.75;entryY=0;entryDx=0;entryDy=0;" parent="1" source="Xy02D-rM18JvdIoiQVGx-1" target="Xy02D-rM18JvdIoiQVGx-4" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Xy02D-rM18JvdIoiQVGx-1" value="FixWeather&lt;div&gt;提早出现的毒圈，会有个缩小（半径和变化时间）&lt;/div&gt;&lt;div&gt;这里运算变化后的半径和时间&lt;/div&gt;&lt;div&gt;weatherData.fixedLifeRadius&lt;br&gt;&lt;/div&gt;&lt;div&gt;weatherData.fixedLifeTick&lt;br&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="470" y="910" width="410" height="240" as="geometry" />
        </mxCell>
        <mxCell id="Xy02D-rM18JvdIoiQVGx-19" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="Xy02D-rM18JvdIoiQVGx-4" target="Xy02D-rM18JvdIoiQVGx-13" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Xy02D-rM18JvdIoiQVGx-20" value="变量使用的地方" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="Xy02D-rM18JvdIoiQVGx-19" vertex="1" connectable="0">
          <mxGeometry x="0.0017" y="-1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Xy02D-rM18JvdIoiQVGx-4" value="最终得到毒圈实际运行的半径和时间&lt;div&gt;&lt;b&gt;WeatherData.lifeTick&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;WeatherData.lifeRadius&lt;/b&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="291" y="1290" width="245" height="150" as="geometry" />
        </mxCell>
        <mxCell id="Xy02D-rM18JvdIoiQVGx-7" value="ServerMarshmackWeatherModule.ToPb()&lt;div&gt;天气数据打包&lt;/div&gt;" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1640" y="1320" width="270" height="100" as="geometry" />
        </mxCell>
        <mxCell id="Xy02D-rM18JvdIoiQVGx-10" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="Xy02D-rM18JvdIoiQVGx-9" target="Xy02D-rM18JvdIoiQVGx-7" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Xy02D-rM18JvdIoiQVGx-9" value="ServerMarshmackWeatherModule.SyncAllData()&lt;div&gt;同步对局所有的天气数据给客户端（单播or广播)&lt;/div&gt;" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1440" y="1150" width="340" height="100" as="geometry" />
        </mxCell>
        <mxCell id="Xy02D-rM18JvdIoiQVGx-12" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.75;entryY=0;entryDx=0;entryDy=0;" parent="1" source="Xy02D-rM18JvdIoiQVGx-11" target="Xy02D-rM18JvdIoiQVGx-7" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Xy02D-rM18JvdIoiQVGx-11" value="SyncOneWeatherToClient()&lt;div&gt;把一个天气数据广播一下&lt;/div&gt;" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1910" y="1160" width="200" height="70" as="geometry" />
        </mxCell>
        <mxCell id="Xy02D-rM18JvdIoiQVGx-14" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="Xy02D-rM18JvdIoiQVGx-13" target="Xy02D-rM18JvdIoiQVGx-11" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Xy02D-rM18JvdIoiQVGx-18" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="Xy02D-rM18JvdIoiQVGx-13" target="Xy02D-rM18JvdIoiQVGx-17" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="BiNtSyXb7KPDdfa0L7t0-2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="Xy02D-rM18JvdIoiQVGx-13" target="BiNtSyXb7KPDdfa0L7t0-1" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Xy02D-rM18JvdIoiQVGx-13" value="Activate()&lt;div&gt;0. 扫描每个天气&lt;br&gt;&lt;div&gt;1. 如果天气到达启动时间，并且未同步过，则同步一次(isSynced) SyncOneWeatherToClient&lt;/div&gt;&lt;/div&gt;&lt;div&gt;2. 天气Update&amp;nbsp;weather.Update()&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;3. 检查所有玩家是否在毒圈内&amp;nbsp;CheckIsInSafeArea&lt;/div&gt;&lt;div&gt;4. 检查所有npc是否在毒圈内&amp;nbsp;CheckNPC&lt;/div&gt;" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1460" y="500" width="600" height="130" as="geometry" />
        </mxCell>
        <mxCell id="Xy02D-rM18JvdIoiQVGx-15" value="CheckIsInSafeArea&lt;div&gt;检查所有玩家是否在毒圈内&lt;br&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2020" y="690" width="170" height="90" as="geometry" />
        </mxCell>
        <mxCell id="Xy02D-rM18JvdIoiQVGx-16" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.44;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;exitX=0.75;exitY=1;exitDx=0;exitDy=0;" parent="1" source="Xy02D-rM18JvdIoiQVGx-13" target="Xy02D-rM18JvdIoiQVGx-15" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Xy02D-rM18JvdIoiQVGx-17" value="CheckNPC&lt;div&gt;检查所有npc是否在毒圈内&lt;br&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2220" y="710" width="170" height="60" as="geometry" />
        </mxCell>
        <mxCell id="gJiij9rXR8iOSp0JskP7-2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.25;entryY=0;entryDx=0;entryDy=0;" parent="1" source="gJiij9rXR8iOSp0JskP7-1" target="7STc2YbkeW5kZMqmHtm8-4" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint y="900" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="gJiij9rXR8iOSp0JskP7-1" value="OnPhase3Start" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-300" y="740" width="230" height="70" as="geometry" />
        </mxCell>
        <mxCell id="BiNtSyXb7KPDdfa0L7t0-1" value="天气Update&lt;div&gt;获取&lt;b&gt;当前毒圈对应的大小&lt;/b&gt;GetRadius，通过lifeRadius和时间插值&lt;/div&gt;" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1440" y="730" width="230" height="80" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="D4cUpWKldzLiPTz7wScZ" name="结算模块">
    <mxGraphModel dx="3527" dy="1620" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="X2hCjSS4Vl0-8XwFfeY9-3" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="X2hCjSS4Vl0-8XwFfeY9-1" target="X2hCjSS4Vl0-8XwFfeY9-2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="X2hCjSS4Vl0-8XwFfeY9-1" value="OnPlayerSettleBack(PlayerId, ···）&lt;div&gt;1. 若是马氏马克，则撤离该玩家&lt;/div&gt;&lt;div&gt;2. 其他玩法则全部真实玩家都撤离&lt;/div&gt;" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="230" y="585" width="330" height="80" as="geometry" />
        </mxCell>
        <mxCell id="X2hCjSS4Vl0-8XwFfeY9-6" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="X2hCjSS4Vl0-8XwFfeY9-2" target="X2hCjSS4Vl0-8XwFfeY9-5" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="X2hCjSS4Vl0-8XwFfeY9-2" value="WarUser.SetGSSettleBackInfo&lt;div&gt;1. 撤离阶段的&amp;nbsp;&lt;b&gt;未撤离的玩家集合&lt;/b&gt;&amp;nbsp;移除当前玩家 WarSettleStage.waitSettleBackUsers.Remove(userID)&lt;/div&gt;&lt;div&gt;2. 在撤离阶段模块里 保存撤离时玩家的数据&amp;nbsp;settleStage.OnSettleBack(this(WarUser), info);&lt;/div&gt;&lt;div&gt;3. 所有玩家结算完毕&amp;nbsp;if (_settleCount &amp;lt;= 0)&lt;/div&gt;&lt;div&gt;4. 玩家播放结算界面UI SendSettleToClient :&amp;nbsp;&lt;b&gt;S2C_PROTOCOL.S2CWarSettle&lt;/b&gt;&lt;/div&gt;&lt;div&gt;5. 若是马氏马克地图则把所有玩家都踢出去&amp;nbsp;DoKickPlayerAfterEvaluate&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-60" y="790" width="910" height="140" as="geometry" />
        </mxCell>
        <mxCell id="X2hCjSS4Vl0-8XwFfeY9-4" value="游戏4个阶段&lt;div&gt;&lt;div&gt;public enum WarProgressStatus {&lt;/div&gt;&lt;div&gt;&amp;nbsp; [pbr::OriginalName(&quot;WarStandby&quot;)] WarStandby = 0,&lt;/div&gt;&lt;div&gt;&amp;nbsp; [pbr::OriginalName(&quot;WarWaitting&quot;)] WarWaitting = 1,&lt;/div&gt;&lt;div&gt;&amp;nbsp; [pbr::OriginalName(&quot;WarInFormalBattle&quot;)] WarInFormalBattle = 2,&lt;/div&gt;&lt;div&gt;&amp;nbsp; [pbr::OriginalName(&quot;WarSettle&quot;)] WarSettle = 3,&lt;/div&gt;&lt;div&gt;}&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-150" y="320" width="420" height="190" as="geometry" />
        </mxCell>
        <mxCell id="iwHbo75aDm783HOtJ5gw-2" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="X2hCjSS4Vl0-8XwFfeY9-5" target="iwHbo75aDm783HOtJ5gw-1" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="iwHbo75aDm783HOtJ5gw-10" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="X2hCjSS4Vl0-8XwFfeY9-5" target="X2hCjSS4Vl0-8XwFfeY9-22" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="X2hCjSS4Vl0-8XwFfeY9-5" value="GameRoomManager.DoKickPlayerAfterEvaluate&lt;div&gt;撤离后，删除玩家，会删除gs上的状态，断开客户端连接&lt;br&gt;&lt;/div&gt;&lt;div&gt;S2GClientHolder.instance.DoPlayerLeaveRoom(playerID, roomId);&lt;br&gt;&lt;/div&gt;&lt;div&gt;gameRoom.CheckForceEndInMashMark();&lt;br&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="192.5" y="980" width="405" height="110" as="geometry" />
        </mxCell>
        <mxCell id="X2hCjSS4Vl0-8XwFfeY9-9" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="X2hCjSS4Vl0-8XwFfeY9-7" target="X2hCjSS4Vl0-8XwFfeY9-8" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="X2hCjSS4Vl0-8XwFfeY9-7" value="StageController.Activate&lt;div&gt;1. GameRoomManager的一个模块&lt;/div&gt;&lt;div&gt;2. active 当前状态机的状态节点&lt;/div&gt;&lt;div&gt;3. 判断是否需要进入下一个状态&lt;/div&gt;" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-690" y="670" width="270" height="100" as="geometry" />
        </mxCell>
        <mxCell id="X2hCjSS4Vl0-8XwFfeY9-11" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="X2hCjSS4Vl0-8XwFfeY9-8" target="X2hCjSS4Vl0-8XwFfeY9-10" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="X2hCjSS4Vl0-8XwFfeY9-8" value="SetNowStage&lt;div&gt;对局状态机修改状态&lt;/div&gt;&lt;div&gt;1. 先调用当前状态的&amp;nbsp;EndStage&lt;/div&gt;&lt;div&gt;2. 修改当前状态&lt;/div&gt;&lt;div&gt;2. 调用当前状态的 BeginStage&lt;/div&gt;" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-695" y="870" width="280" height="130" as="geometry" />
        </mxCell>
        <mxCell id="X2hCjSS4Vl0-8XwFfeY9-13" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="X2hCjSS4Vl0-8XwFfeY9-10" target="X2hCjSS4Vl0-8XwFfeY9-12" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="X2hCjSS4Vl0-8XwFfeY9-18" value="大世界结算&lt;div&gt;SettleType.SceneSettle&lt;br&gt;&lt;/div&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="X2hCjSS4Vl0-8XwFfeY9-13" vertex="1" connectable="0">
          <mxGeometry x="0.283" y="-1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="X2hCjSS4Vl0-8XwFfeY9-21" value="马氏马克地图" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="X2hCjSS4Vl0-8XwFfeY9-13" vertex="1" connectable="0">
          <mxGeometry x="-0.7067" y="-4" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="X2hCjSS4Vl0-8XwFfeY9-15" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="X2hCjSS4Vl0-8XwFfeY9-10" target="X2hCjSS4Vl0-8XwFfeY9-14" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="X2hCjSS4Vl0-8XwFfeY9-20" value="普通地图" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="X2hCjSS4Vl0-8XwFfeY9-15" vertex="1" connectable="0">
          <mxGeometry x="-0.0022" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="X2hCjSS4Vl0-8XwFfeY9-10" value="WarSettleStage.BeginStage&lt;div&gt;对局状态的最后一个状态，玩家撤离，结算状态&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;1.&amp;nbsp;&lt;span style=&quot;background-color: initial;&quot;&gt;广播状态给所有客户端&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;DoWarProgressStatusChange&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;2。 广播所有战斗模块 WarModule.&lt;b&gt;OnWarProgressStatusChange&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;3. 触发状态变化事件&amp;nbsp;&lt;b&gt;eOnWarProgressStatusChange&lt;/b&gt;&lt;/div&gt;&lt;div&gt;4. 触发事件 &lt;b&gt;eOnPreSettle&lt;/b&gt;&amp;nbsp;&lt;/div&gt;&lt;div&gt;5. 触发结算&amp;nbsp;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;马氏马克(&lt;/b&gt;&lt;/span&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;DoTakovSettle ）或普通地图（&lt;/b&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;）&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-1170" y="1240" width="650" height="330" as="geometry" />
        </mxCell>
        <mxCell id="tbXuN5tdV9wPfBtT21cm-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="X2hCjSS4Vl0-8XwFfeY9-12" target="X2hCjSS4Vl0-8XwFfeY9-37" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="-1430" y="2225" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="sXqGfIYJYRPDIAsolWKU-5" value="大世界结算&lt;div&gt;SettleType.SceneSettle&lt;/div&gt;&lt;div&gt;才走这里&lt;/div&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="tbXuN5tdV9wPfBtT21cm-3" vertex="1" connectable="0">
          <mxGeometry x="0.2745" y="-4" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="8TcxuSPbjz_Wi930k5-i-1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="X2hCjSS4Vl0-8XwFfeY9-12" target="8TcxuSPbjz_Wi930k5-i-2">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="-1430" y="2850" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="X2hCjSS4Vl0-8XwFfeY9-12" value="&lt;div&gt;马氏马克结算流程&lt;/div&gt;WarSettleStage.&lt;b&gt;DoTakovSettle&lt;/b&gt;" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-1610" y="1810" width="360" height="150" as="geometry" />
        </mxCell>
        <mxCell id="X2hCjSS4Vl0-8XwFfeY9-16" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="X2hCjSS4Vl0-8XwFfeY9-14" target="X2hCjSS4Vl0-8XwFfeY9-12" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="X2hCjSS4Vl0-8XwFfeY9-17" value="个人结算&lt;div&gt;SettleType.PersonSettle&lt;br&gt;&lt;/div&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="X2hCjSS4Vl0-8XwFfeY9-16" vertex="1" connectable="0">
          <mxGeometry x="-0.0019" y="-3" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="tbXuN5tdV9wPfBtT21cm-1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="X2hCjSS4Vl0-8XwFfeY9-14" target="X2hCjSS4Vl0-8XwFfeY9-37" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8TcxuSPbjz_Wi930k5-i-7" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.75;entryDx=0;entryDy=0;" edge="1" parent="1" source="X2hCjSS4Vl0-8XwFfeY9-14" target="8TcxuSPbjz_Wi930k5-i-2">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="-1120" y="2950" as="targetPoint" />
            <Array as="points">
              <mxPoint x="-360" y="1910" />
              <mxPoint x="-360" y="2948" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="X2hCjSS4Vl0-8XwFfeY9-14" value="&lt;div&gt;普通结算流程&lt;/div&gt;WarSettleStage.&lt;b&gt;DoSettle&lt;/b&gt;" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-760" y="1850" width="280" height="120" as="geometry" />
        </mxCell>
        <mxCell id="X2hCjSS4Vl0-8XwFfeY9-24" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="X2hCjSS4Vl0-8XwFfeY9-22" target="X2hCjSS4Vl0-8XwFfeY9-23" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="iwHbo75aDm783HOtJ5gw-12" value="所有真人都离开时" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="X2hCjSS4Vl0-8XwFfeY9-24" vertex="1" connectable="0">
          <mxGeometry x="0.0364" y="4" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="X2hCjSS4Vl0-8XwFfeY9-22" value="&lt;div&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;GameRoom.CheckForceEndInMashMark&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;只有ai玩家，且真人都有离开标记，则强制撤离&lt;/div&gt;&lt;/div&gt;&lt;div&gt;_serverWarscene.serverWar.ForceToEnd&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-260" y="1280" width="330" height="110" as="geometry" />
        </mxCell>
        <mxCell id="X2hCjSS4Vl0-8XwFfeY9-27" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="X2hCjSS4Vl0-8XwFfeY9-23" target="X2hCjSS4Vl0-8XwFfeY9-26" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="X2hCjSS4Vl0-8XwFfeY9-23" value="ServerWar.ForceToEnd()" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-205" y="1500" width="220" height="80" as="geometry" />
        </mxCell>
        <mxCell id="X2hCjSS4Vl0-8XwFfeY9-26" value="WarJudgments.ForceToEndJudgment" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-202.5" y="1670" width="215" height="60" as="geometry" />
        </mxCell>
        <mxCell id="X2hCjSS4Vl0-8XwFfeY9-28" value="WarJudgments.ForceAchieveWinPointWarToEnd" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="630" y="2090" width="270" height="60" as="geometry" />
        </mxCell>
        <mxCell id="X2hCjSS4Vl0-8XwFfeY9-30" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="X2hCjSS4Vl0-8XwFfeY9-29" target="X2hCjSS4Vl0-8XwFfeY9-28" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="X2hCjSS4Vl0-8XwFfeY9-29" value="StaticWarAgent.ForceAchieveWinPointWarToEnd" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="620" y="1950" width="290" height="90" as="geometry" />
        </mxCell>
        <mxCell id="X2hCjSS4Vl0-8XwFfeY9-32" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="X2hCjSS4Vl0-8XwFfeY9-31" target="X2hCjSS4Vl0-8XwFfeY9-29" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="X2hCjSS4Vl0-8XwFfeY9-31" value="行为树节点&lt;div&gt;Server.BehaviorTree.Actions&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;ForceAchieveWinPointWarToEndAction.OnUpdate&lt;/b&gt;&lt;br&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="615" y="1790" width="300" height="60" as="geometry" />
        </mxCell>
        <mxCell id="X2hCjSS4Vl0-8XwFfeY9-34" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="X2hCjSS4Vl0-8XwFfeY9-33" target="X2hCjSS4Vl0-8XwFfeY9-31" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="X2hCjSS4Vl0-8XwFfeY9-33" value="BehaviorDesigner.Runtime.BehaviorTypeId.Register(8074, typeof(Server.BehaviorTree.Actions.ForceAchieveWinPointWarToEndAction));" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="542.5" y="1690" width="445" height="40" as="geometry" />
        </mxCell>
        <mxCell id="sXqGfIYJYRPDIAsolWKU-2" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="X2hCjSS4Vl0-8XwFfeY9-36" target="sXqGfIYJYRPDIAsolWKU-1" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="X2hCjSS4Vl0-8XwFfeY9-36" value="&lt;div&gt;强制结算本局，&lt;span style=&quot;background-color: initial;&quot;&gt;结算剩余的每个玩家&lt;/span&gt;&lt;/div&gt;ForceSettle&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;1. ServerWarUser.DoSettle()&lt;br&gt;&lt;/div&gt;&lt;div&gt;2. 计算结算时的队伍排名&lt;/div&gt;" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-775" y="2330" width="310" height="90" as="geometry" />
        </mxCell>
        <mxCell id="X2hCjSS4Vl0-8XwFfeY9-38" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="X2hCjSS4Vl0-8XwFfeY9-37" target="X2hCjSS4Vl0-8XwFfeY9-36" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8TcxuSPbjz_Wi930k5-i-6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="X2hCjSS4Vl0-8XwFfeY9-37" target="8TcxuSPbjz_Wi930k5-i-2">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="-1210" y="2880" as="targetPoint" />
            <Array as="points">
              <mxPoint x="-380" y="2225" />
              <mxPoint x="-380" y="2920" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="X2hCjSS4Vl0-8XwFfeY9-37" value="WarSettleStage.DoTakovGMSettle" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-755" y="2200" width="270" height="50" as="geometry" />
        </mxCell>
        <mxCell id="iwHbo75aDm783HOtJ5gw-4" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="iwHbo75aDm783HOtJ5gw-1" target="iwHbo75aDm783HOtJ5gw-3" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="iwHbo75aDm783HOtJ5gw-1" value="S2GClient.DoPlayerLeaveRoom" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="255" y="1169" width="280" height="80" as="geometry" />
        </mxCell>
        <mxCell id="iwHbo75aDm783HOtJ5gw-3" value="S2GClient.DoGsPlayerLeaveNotify&lt;div&gt;GameRoomPlayer.removedFromGs = true&lt;br&gt;&lt;/div&gt;&lt;div&gt;打上离开标记&lt;/div&gt;" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="242.5" y="1310" width="305" height="60" as="geometry" />
        </mxCell>
        <mxCell id="iwHbo75aDm783HOtJ5gw-7" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="iwHbo75aDm783HOtJ5gw-5" target="iwHbo75aDm783HOtJ5gw-6" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="iwHbo75aDm783HOtJ5gw-5" value="S2CServerProtocol.OnClosed" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1135" y="1753" width="180" height="70" as="geometry" />
        </mxCell>
        <mxCell id="iwHbo75aDm783HOtJ5gw-6" value="GameRoomManager.UnBindSession" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1120" y="1899" width="210" height="70" as="geometry" />
        </mxCell>
        <mxCell id="iwsrBmLCJyc1kqpGC0ak-1" value="&lt;div&gt;对局结束结算 结算分数结果&lt;/div&gt;SettleUpdate(ServerWarUser user, &lt;b&gt;BATTLE_SETTLEMENT_PLAYER &lt;/b&gt;settlementPlayer, BattleStatistics battleStatistics, ulong endTime, int holdeTime)" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="192.5" y="2960" width="927.5" height="130" as="geometry" />
        </mxCell>
        <mxCell id="iwsrBmLCJyc1kqpGC0ak-2" value="&lt;div&gt;//玩家 结算结果 结算分数&lt;/div&gt;&lt;div&gt;message &lt;b&gt;BATTLE_SETTLEMENT_PLAYER&lt;/b&gt;&lt;/div&gt;&lt;div&gt;{&lt;/div&gt;&lt;div&gt;&amp;nbsp; uint64 id = 1; //玩家ID&lt;/div&gt;&lt;div&gt;&amp;nbsp; string name = 2; //玩家名称&lt;/div&gt;&lt;div&gt;&amp;nbsp; int32 mechaId = 3; //机甲ID&lt;/div&gt;&lt;div&gt;&amp;nbsp; int32 campID = 4; //阵营ID&lt;/div&gt;&lt;div&gt;&amp;nbsp; int32 forceId = 5; //势力ID&lt;/div&gt;&lt;div&gt;&amp;nbsp; bool winner = 6; //是否胜利&lt;/div&gt;&lt;div&gt;&amp;nbsp; int32 gameplay = 7;//gameplay ID&lt;/div&gt;&lt;div&gt;&amp;nbsp; bool isBot = 8; // 是否机器人&lt;/div&gt;&lt;div&gt;&amp;nbsp; int32 health = 9;// 当前血量&lt;/div&gt;&lt;div&gt;&amp;nbsp; int32 maxHealth = 10;//最大血量&lt;/div&gt;&lt;div&gt;&amp;nbsp; bool isFirstBlood = 11;//是否拿到一血&lt;/div&gt;&lt;div&gt;&amp;nbsp; bool isEvacuateSuccess = 12; // 是否成功撤离&lt;/div&gt;&lt;div&gt;&amp;nbsp; uint64 teamId = 13; // 小队id&lt;/div&gt;&lt;div&gt;&amp;nbsp; int32 pilotId = 14; // 驾驶员id&lt;/div&gt;&lt;div&gt;&amp;nbsp; int32 pilotLevel = 15; // 驾驶员等级&lt;/div&gt;&lt;div&gt;&amp;nbsp; ACHIEVEMENT_SHOW achievement_show = 16;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; // 废除&lt;/div&gt;&lt;div&gt;&amp;nbsp; int32 mechaLevel = 17; // 废弃&lt;/div&gt;&lt;div&gt;&amp;nbsp; int32 mechaExp = 18; // 废弃&lt;/div&gt;&lt;div&gt;&amp;nbsp; int32 mecha_syn = 19; //机甲同步率&lt;/div&gt;&lt;div&gt;&amp;nbsp; int32 rank_level = 20;//玩家段位&lt;/div&gt;&lt;div&gt;&amp;nbsp; int32 rank_star = 21;//玩家段位星数&lt;/div&gt;&lt;div&gt;&amp;nbsp; int32 individual_rank = 22; //个人排名&lt;/div&gt;&lt;div&gt;&amp;nbsp; int32 user_status = 23; //玩家结算状态&amp;nbsp;&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp; //map&amp;lt;string,int64&amp;gt; stats = 101;&amp;nbsp; //所有统计 保存库的数据 数据结果由策划配置（废除，key改成整数）&lt;/div&gt;&lt;div&gt;&amp;nbsp; repeated BATTLE_SETTLEMENT_SKILL skills = 102;&amp;nbsp; //所有技能&lt;/div&gt;&lt;div&gt;&amp;nbsp; //map&amp;lt;string,int64&amp;gt; scorings = 103;&amp;nbsp; &amp;nbsp; //所有评分（废除，key改成整数）&lt;/div&gt;&lt;div&gt;&amp;nbsp; //map&amp;lt;string,double&amp;gt; votings = 104;&amp;nbsp; &amp;nbsp; //所有评选（废除，key改成整数）&lt;/div&gt;&lt;div&gt;&amp;nbsp; map&amp;lt;int32,int32&amp;gt;&amp;nbsp; &amp;nbsp;mechakills = 105;&amp;nbsp; &amp;nbsp;//击杀不同机甲次数&lt;/div&gt;&lt;div&gt;&amp;nbsp; //map&amp;lt;string,int32&amp;gt;&amp;nbsp; &amp;nbsp;questscorings = 106;&amp;nbsp; &amp;nbsp;//任务用到分数（废除，key改成整数）&lt;/div&gt;&lt;div&gt;&amp;nbsp; repeated ITEM_DATA items = 107;&lt;span style=&quot;white-space:pre&quot;&gt;&#x9;&lt;/span&gt;// 带出局外道具&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1350" y="2880" width="590" height="530" as="geometry" />
        </mxCell>
        <mxCell id="sXqGfIYJYRPDIAsolWKU-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="sXqGfIYJYRPDIAsolWKU-1" target="X2hCjSS4Vl0-8XwFfeY9-12" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="-1140" y="2530" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="sXqGfIYJYRPDIAsolWKU-4" value="个人结算&lt;div&gt;SettleType.PersonSettle&lt;/div&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="sXqGfIYJYRPDIAsolWKU-3" vertex="1" connectable="0">
          <mxGeometry x="-0.4747" y="3" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="sXqGfIYJYRPDIAsolWKU-1" value="&lt;br&gt;&lt;span style=&quot;color: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: center; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; background-color: rgb(251, 251, 251); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; display: inline !important; float: none;&quot;&gt;ServerWarUser.DoSettle(WAR_END_TYPE warEndType, int rank)&lt;/span&gt;&lt;div&gt;&lt;br/&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-835" y="2520" width="430" height="100" as="geometry" />
        </mxCell>
        <mxCell id="8TcxuSPbjz_Wi930k5-i-9" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="8TcxuSPbjz_Wi930k5-i-2" target="8TcxuSPbjz_Wi930k5-i-8">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8TcxuSPbjz_Wi930k5-i-10" value="ROOM2AGENT_CMD.R2ARoundSettle&lt;div&gt;R2A_ROUND_SETTLE&lt;br&gt;&lt;/div&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="8TcxuSPbjz_Wi930k5-i-9">
          <mxGeometry x="-0.0071" y="-4" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="8TcxuSPbjz_Wi930k5-i-2" value="&lt;div&gt;发送结算数据&lt;/div&gt;S2GClientHolder.instance.DoRoundSettle" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-1542.5" y="2868" width="225" height="110" as="geometry" />
        </mxCell>
        <mxCell id="8TcxuSPbjz_Wi930k5-i-12" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="8TcxuSPbjz_Wi930k5-i-8" target="8TcxuSPbjz_Wi930k5-i-11">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8TcxuSPbjz_Wi930k5-i-13" value="ra2ig_competition_battle_settlement" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="8TcxuSPbjz_Wi930k5-i-12">
          <mxGeometry x="0.0131" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="8TcxuSPbjz_Wi930k5-i-8" value="RoomHandle::OnRoundSettle" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-1537.5" y="3090" width="220" height="80" as="geometry" />
        </mxCell>
        <mxCell id="8TcxuSPbjz_Wi930k5-i-15" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="8TcxuSPbjz_Wi930k5-i-11" target="8TcxuSPbjz_Wi930k5-i-14">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8TcxuSPbjz_Wi930k5-i-16" value="db2gs_competition_battle_end" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="8TcxuSPbjz_Wi930k5-i-15">
          <mxGeometry x="0.0308" y="2" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="8TcxuSPbjz_Wi930k5-i-18" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="8TcxuSPbjz_Wi930k5-i-11" target="8TcxuSPbjz_Wi930k5-i-17">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8TcxuSPbjz_Wi930k5-i-19" value="db2gs_competition_battle_end" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="8TcxuSPbjz_Wi930k5-i-18">
          <mxGeometry x="0.0077" y="-4" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="8TcxuSPbjz_Wi930k5-i-11" value="DB存储&lt;div&gt;DBHandle.OnIntegratingSettle&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;1. DBUpdateIntegratingBattle&amp;nbsp;记录战斗结算信息&lt;br&gt;&lt;/div&gt;&lt;div&gt;2. 保存每个玩家的结算数据&amp;nbsp;db2gs_competition_battle_end&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-1607.5" y="3270" width="360" height="140" as="geometry" />
        </mxCell>
        <mxCell id="8TcxuSPbjz_Wi930k5-i-21" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="8TcxuSPbjz_Wi930k5-i-14" target="8TcxuSPbjz_Wi930k5-i-20">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8TcxuSPbjz_Wi930k5-i-14" value="&lt;div&gt;GameServer&lt;/div&gt;BattleStatisHandle::OnPlayerBattleEnd" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-1790" y="3650" width="252.5" height="130" as="geometry" />
        </mxCell>
        <mxCell id="8TcxuSPbjz_Wi930k5-i-17" value="&lt;div&gt;保存失败回调DB&lt;/div&gt;DBHandle::OnCompetitionBattleEndFailed" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-1380" y="3660" width="320" height="110" as="geometry" />
        </mxCell>
        <mxCell id="8TcxuSPbjz_Wi930k5-i-20" value="BattleStatisData::UpdateBattleEnd" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-1798.75" y="3860" width="270" height="80" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="L85grx4k__njMR5yMUTE" name="场景物体生命周期">
    <mxGraphModel dx="1873" dy="1620" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="hKyG-CNHcOGt0lkQEHC8-5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="hKyG-CNHcOGt0lkQEHC8-1" target="hKyG-CNHcOGt0lkQEHC8-2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hKyG-CNHcOGt0lkQEHC8-1" value="ClientWarScene.DeleteSceneObject&lt;div&gt;删除所有场景物体&lt;/div&gt;" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="260" y="980" width="230" height="70" as="geometry" />
        </mxCell>
        <mxCell id="hKyG-CNHcOGt0lkQEHC8-20" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="hKyG-CNHcOGt0lkQEHC8-2" target="hKyG-CNHcOGt0lkQEHC8-19" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hKyG-CNHcOGt0lkQEHC8-2" value="WarScene.DeleteSceneObject(SceneObject so)&lt;div&gt;删除单个场景物体&lt;/div&gt;" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="490" y="1180" width="300" height="100" as="geometry" />
        </mxCell>
        <mxCell id="hKyG-CNHcOGt0lkQEHC8-4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="hKyG-CNHcOGt0lkQEHC8-3" target="hKyG-CNHcOGt0lkQEHC8-1" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hKyG-CNHcOGt0lkQEHC8-3" value="SettlementLogic.Enter&lt;div&gt;进入撤离状态&lt;/div&gt;" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="100" y="790" width="220" height="80" as="geometry" />
        </mxCell>
        <mxCell id="hKyG-CNHcOGt0lkQEHC8-7" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="hKyG-CNHcOGt0lkQEHC8-6" target="hKyG-CNHcOGt0lkQEHC8-2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hKyG-CNHcOGt0lkQEHC8-6" value="ClientWarScene.ProcessDelayDeletes&lt;div&gt;实际延迟删除操作&lt;/div&gt;" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="690" y="990" width="230" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hKyG-CNHcOGt0lkQEHC8-8" value="DeathReplayManager.ClearUnits&lt;div&gt;回放管理，清理所有场景物体&lt;/div&gt;" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1150" y="1010" width="210" height="70" as="geometry" />
        </mxCell>
        <mxCell id="hKyG-CNHcOGt0lkQEHC8-9" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.997;entryY=0.69;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="hKyG-CNHcOGt0lkQEHC8-8" target="hKyG-CNHcOGt0lkQEHC8-2" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="830" y="1238" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="hKyG-CNHcOGt0lkQEHC8-11" value="&lt;div&gt;HighlightReplayer.ClearUnits&lt;/div&gt;全场最佳" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1160" y="1195" width="210" height="70" as="geometry" />
        </mxCell>
        <mxCell id="hKyG-CNHcOGt0lkQEHC8-12" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="hKyG-CNHcOGt0lkQEHC8-11" target="hKyG-CNHcOGt0lkQEHC8-2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hKyG-CNHcOGt0lkQEHC8-14" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="hKyG-CNHcOGt0lkQEHC8-13" target="hKyG-CNHcOGt0lkQEHC8-2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hKyG-CNHcOGt0lkQEHC8-13" value="SkillSpawnWeaponActionServerInvoke.Execute&lt;div&gt;处决&lt;/div&gt;" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-10" y="1390" width="340" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hKyG-CNHcOGt0lkQEHC8-16" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="hKyG-CNHcOGt0lkQEHC8-15" target="hKyG-CNHcOGt0lkQEHC8-6" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hKyG-CNHcOGt0lkQEHC8-15" value="ClientWarScene.RemoveSceneObject(SceneObject so)" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="647.5" y="850" width="315" height="50" as="geometry" />
        </mxCell>
        <mxCell id="hKyG-CNHcOGt0lkQEHC8-22" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="hKyG-CNHcOGt0lkQEHC8-19" target="hKyG-CNHcOGt0lkQEHC8-21" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hKyG-CNHcOGt0lkQEHC8-19" value="WarScene.RemoveSceneObject(SceneObject so)&lt;div&gt;实际执行删除&lt;/div&gt;" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="490" y="1380" width="300" height="70" as="geometry" />
        </mxCell>
        <mxCell id="hKyG-CNHcOGt0lkQEHC8-21" value="SceneObject.RemoveFromScene()" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="510" y="1510" width="260" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ChcU5H5cNufQpcIHxFxy-2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="qAwerYIChVjv81fXeXq3-1" target="ChcU5H5cNufQpcIHxFxy-1" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="qAwerYIChVjv81fXeXq3-1" value="&lt;div&gt;删除玩家前置操作&lt;/div&gt;DoActionBeforeDelete&lt;div&gt;GameDebug.Log($&quot;delete soplayer templateId:{templateID} sceneObjectID:{id} runtick:{GameWorldTime.s_RunTick}&quot;);&lt;br&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1570" y="1300" width="670" height="140" as="geometry" />
        </mxCell>
        <mxCell id="ChcU5H5cNufQpcIHxFxy-4" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="ChcU5H5cNufQpcIHxFxy-1" target="ChcU5H5cNufQpcIHxFxy-3" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ChcU5H5cNufQpcIHxFxy-1" value="soUnit.DoActionBeforeDelete()&lt;br&gt;&lt;div&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;skillComponent.inventory.&lt;/b&gt;&lt;/span&gt;&lt;b&gt;FinishAllSkill()&lt;/b&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;调用基类的删除&lt;/div&gt;&lt;div&gt;soUnit:SceneObject&lt;/div&gt;" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1770" y="1680" width="270" height="120" as="geometry" />
        </mxCell>
        <mxCell id="ChcU5H5cNufQpcIHxFxy-3" value="SceneObject.DoActionBeforeDelete()&lt;div&gt;移除物体的所有组件&amp;nbsp;componentContainer&lt;/div&gt;&lt;div&gt;通知所有召唤物，父节点已被删除&amp;nbsp;EEventKey.eOnSpawnObjDelete&lt;/div&gt;" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1685" y="1860" width="440" height="120" as="geometry" />
        </mxCell>
        <mxCell id="ChcU5H5cNufQpcIHxFxy-6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="ChcU5H5cNufQpcIHxFxy-5" target="qAwerYIChVjv81fXeXq3-1" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ChcU5H5cNufQpcIHxFxy-7" value="CommonLogicUtils.IsServer()" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="ChcU5H5cNufQpcIHxFxy-6" vertex="1" connectable="0">
          <mxGeometry x="-0.0316" y="4" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ChcU5H5cNufQpcIHxFxy-5" value="SceneObject bool &lt;b&gt;IsDelete&lt;/b&gt;&lt;div&gt;&lt;b&gt;设置物件的删除标记&lt;/b&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1760" y="1020" width="290" height="90" as="geometry" />
        </mxCell>
        <mxCell id="jeA5YK_Ed9TRFlLAVQ66-3" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="jeA5YK_Ed9TRFlLAVQ66-1" target="jeA5YK_Ed9TRFlLAVQ66-2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="jeA5YK_Ed9TRFlLAVQ66-1" value="soUnit" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="450" y="240" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="jeA5YK_Ed9TRFlLAVQ66-5" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="jeA5YK_Ed9TRFlLAVQ66-2" target="jeA5YK_Ed9TRFlLAVQ66-4" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="jeA5YK_Ed9TRFlLAVQ66-2" value="soPlayer : soUnit" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="450" y="380" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="jeA5YK_Ed9TRFlLAVQ66-4" value="SoUnitDataController&lt;div&gt;_soPlayer 变量&lt;/div&gt;" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="355" y="490" width="310" height="110" as="geometry" />
        </mxCell>
        <mxCell id="jeA5YK_Ed9TRFlLAVQ66-6" value="ServerWarUser&lt;div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; public soUserController userController&amp;nbsp;&amp;nbsp;= new soUserController();&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-490" y="462" width="537.5" height="123" as="geometry" />
        </mxCell>
        <mxCell id="jeA5YK_Ed9TRFlLAVQ66-9" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="jeA5YK_Ed9TRFlLAVQ66-8" target="jeA5YK_Ed9TRFlLAVQ66-6" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="jeA5YK_Ed9TRFlLAVQ66-8" value="WarUser&lt;div&gt;public ControlledSO controlledSo = new ControlledSO();&lt;br&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-450" y="250" width="368.12" height="100" as="geometry" />
        </mxCell>
        <mxCell id="jeA5YK_Ed9TRFlLAVQ66-12" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="jeA5YK_Ed9TRFlLAVQ66-10" target="jeA5YK_Ed9TRFlLAVQ66-11" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="jeA5YK_Ed9TRFlLAVQ66-10" value="soController" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="20" y="46" width="160" height="70" as="geometry" />
        </mxCell>
        <mxCell id="jeA5YK_Ed9TRFlLAVQ66-13" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="jeA5YK_Ed9TRFlLAVQ66-11" target="jeA5YK_Ed9TRFlLAVQ66-6" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="jeA5YK_Ed9TRFlLAVQ66-11" value="&lt;div&gt;行为控制器&lt;/div&gt;soUserController" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="25" y="266" width="150" height="75" as="geometry" />
        </mxCell>
        <mxCell id="jeA5YK_Ed9TRFlLAVQ66-15" value="soPlayer.OnAddToScene()" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2640" y="1260" width="200" height="70" as="geometry" />
        </mxCell>
        <mxCell id="jeA5YK_Ed9TRFlLAVQ66-17" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="jeA5YK_Ed9TRFlLAVQ66-16" target="jeA5YK_Ed9TRFlLAVQ66-15" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="jeA5YK_Ed9TRFlLAVQ66-16" value="soUnit&lt;span style=&quot;background-color: initial;&quot;&gt;.OnAddToScene()&lt;/span&gt;&lt;div&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;syncMoveCtrlData.Init&lt;br&gt;&lt;/span&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2670" y="1150" width="140" height="60" as="geometry" />
        </mxCell>
        <mxCell id="jeA5YK_Ed9TRFlLAVQ66-19" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="jeA5YK_Ed9TRFlLAVQ66-18" target="jeA5YK_Ed9TRFlLAVQ66-16" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="jeA5YK_Ed9TRFlLAVQ66-18" value="SceneObject.OnAddToScene()" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2650" y="1020" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="jeA5YK_Ed9TRFlLAVQ66-21" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="jeA5YK_Ed9TRFlLAVQ66-20" target="jeA5YK_Ed9TRFlLAVQ66-18" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="jeA5YK_Ed9TRFlLAVQ66-20" value="SceneObject.AddToScene(GameLogic.WarScene warScene)" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2575" y="910" width="330" height="40" as="geometry" />
        </mxCell>
        <mxCell id="jeA5YK_Ed9TRFlLAVQ66-23" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="jeA5YK_Ed9TRFlLAVQ66-22" target="jeA5YK_Ed9TRFlLAVQ66-20" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="jeA5YK_Ed9TRFlLAVQ66-22" value="WarScene.AddSceneObject(SceneObject so)" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2610" y="810" width="260" height="60" as="geometry" />
        </mxCell>
        <mxCell id="jeA5YK_Ed9TRFlLAVQ66-25" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="jeA5YK_Ed9TRFlLAVQ66-24" target="jeA5YK_Ed9TRFlLAVQ66-22" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="jeA5YK_Ed9TRFlLAVQ66-24" value="ServerWarScene.AddSceneObject(SceneObject so)" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2595" y="700" width="290" height="70" as="geometry" />
        </mxCell>
        <mxCell id="jeA5YK_Ed9TRFlLAVQ66-27" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="jeA5YK_Ed9TRFlLAVQ66-26" target="jeA5YK_Ed9TRFlLAVQ66-24" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="jeA5YK_Ed9TRFlLAVQ66-26" value="WarWorld.AddSceneObject(WarScene scene, SceneObject so)" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2560" y="560" width="360" height="70" as="geometry" />
        </mxCell>
        <mxCell id="jeA5YK_Ed9TRFlLAVQ66-29" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="jeA5YK_Ed9TRFlLAVQ66-28" target="jeA5YK_Ed9TRFlLAVQ66-26" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="jeA5YK_Ed9TRFlLAVQ66-28" value="&lt;div&gt;创建AI&lt;/div&gt;OnTeachingCallAi&lt;div&gt;warWorld.AddSceneObject(WarWorld.ActiveScene, soPlayer)&lt;br&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2068" y="410" width="395" height="90" as="geometry" />
        </mxCell>
        <mxCell id="jeA5YK_Ed9TRFlLAVQ66-31" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="jeA5YK_Ed9TRFlLAVQ66-30" target="jeA5YK_Ed9TRFlLAVQ66-26" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="jeA5YK_Ed9TRFlLAVQ66-30" value="&lt;div&gt;创建NPC&lt;/div&gt;StaticWarAgent.CreateNPC" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2840" y="380" width="210" height="60" as="geometry" />
        </mxCell>
        <mxCell id="t9X-w_DtzS08BdtDFxEH-2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="t9X-w_DtzS08BdtDFxEH-1" target="jeA5YK_Ed9TRFlLAVQ66-26">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="t9X-w_DtzS08BdtDFxEH-1" value="&lt;div&gt;创建OB&lt;/div&gt;LaunchObserverById&lt;div&gt;warWorld.AddSceneObject(warWorld.WarScene, ob)&lt;br&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="3140" y="500" width="290" height="90" as="geometry" />
        </mxCell>
        <mxCell id="t9X-w_DtzS08BdtDFxEH-4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="t9X-w_DtzS08BdtDFxEH-3" target="jeA5YK_Ed9TRFlLAVQ66-26">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="t9X-w_DtzS08BdtDFxEH-3" value="&lt;div&gt;创建Player&lt;/div&gt;LaunchMechaById&lt;div&gt;warWorld.AddSceneObject(WarWorld.ActiveScene, player);&lt;br&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="2470" y="195" width="380" height="90" as="geometry" />
        </mxCell>
        <mxCell id="t9X-w_DtzS08BdtDFxEH-6" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="t9X-w_DtzS08BdtDFxEH-5" target="t9X-w_DtzS08BdtDFxEH-3">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="t9X-w_DtzS08BdtDFxEH-5" value="DoUserRespawn(ulong userID)" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="2550" y="10" width="220" height="80" as="geometry" />
        </mxCell>
        <mxCell id="S6u-rpcnTjCrIoK8TIK5-2" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="S6u-rpcnTjCrIoK8TIK5-1" target="jeA5YK_Ed9TRFlLAVQ66-8">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="S6u-rpcnTjCrIoK8TIK5-1" value="&lt;div&gt;角色归属情况（masterId和assistId）&lt;/div&gt;ControlledSO" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-400.94" y="80" width="270" height="70" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="y1CLXse2NQRBPvrjmRW8" name="房间管理">
    <mxGraphModel dx="834" dy="2789" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="2KOhZTdKMy7hFLQyvAgN-1" value="RemoveRoomById" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="385" y="690" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="2KOhZTdKMy7hFLQyvAgN-4" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="2KOhZTdKMy7hFLQyvAgN-2" target="2KOhZTdKMy7hFLQyvAgN-3">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="2KOhZTdKMy7hFLQyvAgN-6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="2KOhZTdKMy7hFLQyvAgN-2" target="2KOhZTdKMy7hFLQyvAgN-5">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="2KOhZTdKMy7hFLQyvAgN-2" value="GameRoomManager.&lt;b&gt;Activate&lt;/b&gt;&lt;div&gt;1. 每个房间都Activate一下&lt;/div&gt;&lt;div&gt;2. 若有需要删除的房间则加入_removedRoomInfos&lt;/div&gt;" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="95" y="330" width="310" height="100" as="geometry" />
        </mxCell>
        <mxCell id="2KOhZTdKMy7hFLQyvAgN-3" value="1. room.Activate();" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="10" y="520" width="240" height="80" as="geometry" />
        </mxCell>
        <mxCell id="2KOhZTdKMy7hFLQyvAgN-7" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="2KOhZTdKMy7hFLQyvAgN-5" target="2KOhZTdKMy7hFLQyvAgN-1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="2KOhZTdKMy7hFLQyvAgN-5" value="2. 删除_removedRoomInfos内的房间" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="350" y="535" width="220" height="50" as="geometry" />
        </mxCell>
        <mxCell id="2KOhZTdKMy7hFLQyvAgN-9" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="2KOhZTdKMy7hFLQyvAgN-8" target="2KOhZTdKMy7hFLQyvAgN-5">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="2KOhZTdKMy7hFLQyvAgN-8" value="AddRemoveRoom&lt;div&gt;加入_removedRoomInfos 待删除列表，等activate实际去删&lt;/div&gt;" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="790" y="310" width="340" height="60" as="geometry" />
        </mxCell>
        <mxCell id="2KOhZTdKMy7hFLQyvAgN-11" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="2KOhZTdKMy7hFLQyvAgN-10" target="2KOhZTdKMy7hFLQyvAgN-8">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="2KOhZTdKMy7hFLQyvAgN-10" value="OnGamePlayAbnormalEnd" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="550" y="10" width="190" height="70" as="geometry" />
        </mxCell>
        <mxCell id="2KOhZTdKMy7hFLQyvAgN-13" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="2KOhZTdKMy7hFLQyvAgN-12" target="2KOhZTdKMy7hFLQyvAgN-8">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="2KOhZTdKMy7hFLQyvAgN-12" value="OnStartGamePlayResult&lt;div&gt;初始化失败就回收&lt;/div&gt;" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1060" y="-60" width="230" height="60" as="geometry" />
        </mxCell>
        <mxCell id="2KOhZTdKMy7hFLQyvAgN-15" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="2KOhZTdKMy7hFLQyvAgN-14" target="2KOhZTdKMy7hFLQyvAgN-8">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="2KOhZTdKMy7hFLQyvAgN-14" value="MirrorGameRoom.DestroyGameRoom&lt;div&gt;观战房间&lt;/div&gt;" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1510" y="-75" width="240" height="90" as="geometry" />
        </mxCell>
        <mxCell id="2KOhZTdKMy7hFLQyvAgN-16" value="&lt;div&gt;房间状态机-结束状态&lt;/div&gt;GameRoomCompleteStage.EndStage" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1860" y="170" width="280" height="90" as="geometry" />
        </mxCell>
        <mxCell id="2KOhZTdKMy7hFLQyvAgN-17" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.997;entryY=0.617;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="2KOhZTdKMy7hFLQyvAgN-16" target="2KOhZTdKMy7hFLQyvAgN-8">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="2KOhZTdKMy7hFLQyvAgN-19" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="2KOhZTdKMy7hFLQyvAgN-18" target="2KOhZTdKMy7hFLQyvAgN-10">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="2KOhZTdKMy7hFLQyvAgN-20" value="M2RGamePlayAbnormalEnd" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="2KOhZTdKMy7hFLQyvAgN-19">
          <mxGeometry x="0.0182" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="2KOhZTdKMy7hFLQyvAgN-18" value="M2SClient.DoGamePLayAbnormalEnd" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="530" y="-340" width="230" height="50" as="geometry" />
        </mxCell>
        <mxCell id="2KOhZTdKMy7hFLQyvAgN-22" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="2KOhZTdKMy7hFLQyvAgN-21" target="2KOhZTdKMy7hFLQyvAgN-18">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="2KOhZTdKMy7hFLQyvAgN-21" value="&lt;div&gt;通知主线，分线异常关闭了&lt;/div&gt;GameRoomManager.RemoveRoom&lt;div&gt;room.mirrorGameRoom.Client.DoGamePLayAbnormalEnd(reason);&lt;br&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="437.5" y="-550" width="415" height="130" as="geometry" />
        </mxCell>
        <mxCell id="2KOhZTdKMy7hFLQyvAgN-23" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" edge="1" parent="1" source="2KOhZTdKMy7hFLQyvAgN-8" target="2KOhZTdKMy7hFLQyvAgN-8">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="-g6x7Nx4DsMFlnD3qJXo" name="MoveData发包行为">
    <mxGraphModel dx="834" dy="1620" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="MkBecNQ7Hb0XB_extmmO-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="MkBecNQ7Hb0XB_extmmO-1" target="MkBecNQ7Hb0XB_extmmO-2">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="MkBecNQ7Hb0XB_extmmO-8" value="multiTag = false" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="MkBecNQ7Hb0XB_extmmO-3">
          <mxGeometry y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="MkBecNQ7Hb0XB_extmmO-1" value="&lt;div&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;SyncMoveCtrlData&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;打包此玩家的数据，若没变更则不打包&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="260" y="580" width="220" height="60" as="geometry" />
        </mxCell>
        <mxCell id="MkBecNQ7Hb0XB_extmmO-15" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="MkBecNQ7Hb0XB_extmmO-2" target="MkBecNQ7Hb0XB_extmmO-14">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="MkBecNQ7Hb0XB_extmmO-2" value="&lt;div&gt;不合并发包&lt;/div&gt;BroadcastAOI" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="130" y="750" width="200" height="80" as="geometry" />
        </mxCell>
        <mxCell id="MkBecNQ7Hb0XB_extmmO-16" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="MkBecNQ7Hb0XB_extmmO-4" target="MkBecNQ7Hb0XB_extmmO-14">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="MkBecNQ7Hb0XB_extmmO-17" value="S2C_PROTOCOL.S2CSyncMoveCtrlData" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="MkBecNQ7Hb0XB_extmmO-16">
          <mxGeometry x="0.1755" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="MkBecNQ7Hb0XB_extmmO-4" value="&lt;div&gt;合并发包&lt;/div&gt;DelayBroadcastAOI" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="470" y="760" width="160" height="60" as="geometry" />
        </mxCell>
        <mxCell id="MkBecNQ7Hb0XB_extmmO-5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.563;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="MkBecNQ7Hb0XB_extmmO-1" target="MkBecNQ7Hb0XB_extmmO-4">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="MkBecNQ7Hb0XB_extmmO-6" value="multiTag = true" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="MkBecNQ7Hb0XB_extmmO-5">
          <mxGeometry x="0.0061" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="MkBecNQ7Hb0XB_extmmO-10" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="MkBecNQ7Hb0XB_extmmO-9" target="MkBecNQ7Hb0XB_extmmO-1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="MkBecNQ7Hb0XB_extmmO-9" value="SyncUnitData(List&amp;lt;soUnit&amp;gt; soUnitList)&lt;div&gt;遍历同步列表所有单位的移动数据&lt;/div&gt;" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="240" y="460" width="260" height="60" as="geometry" />
        </mxCell>
        <mxCell id="MkBecNQ7Hb0XB_extmmO-12" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="MkBecNQ7Hb0XB_extmmO-11" target="MkBecNQ7Hb0XB_extmmO-9">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="MkBecNQ7Hb0XB_extmmO-11" value="ServerWarScene.Activate&lt;div&gt;每帧同步场景内所有单位&lt;/div&gt;" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="255" y="330" width="230" height="60" as="geometry" />
        </mxCell>
        <mxCell id="MkBecNQ7Hb0XB_extmmO-19" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="MkBecNQ7Hb0XB_extmmO-14" target="MkBecNQ7Hb0XB_extmmO-18">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="MkBecNQ7Hb0XB_extmmO-14" value="C2SClientProtocol.OnSyncMoveCtrlData(byte[] data, uint size)" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="190" y="1260" width="360" height="90" as="geometry" />
        </mxCell>
        <mxCell id="MkBecNQ7Hb0XB_extmmO-21" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="MkBecNQ7Hb0XB_extmmO-18" target="MkBecNQ7Hb0XB_extmmO-20">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="MkBecNQ7Hb0XB_extmmO-18" value="MoveCtrlData.Deserialize(CodedInputStream inputStream)" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="185" y="1410" width="370" height="80" as="geometry" />
        </mxCell>
        <mxCell id="MkBecNQ7Hb0XB_extmmO-20" value="MoveCtrlData.Deserialize(PB_MOVE_CTRL_DATA pbMoveCtrlData)" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="500" y="1740" width="400" height="100" as="geometry" />
        </mxCell>
        <mxCell id="MkBecNQ7Hb0XB_extmmO-23" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="MkBecNQ7Hb0XB_extmmO-22" target="MkBecNQ7Hb0XB_extmmO-20">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="MkBecNQ7Hb0XB_extmmO-22" value="MoveCtrlData.Deserialize(Reader reader)" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="825" y="1422.5" width="250" height="55" as="geometry" />
        </mxCell>
        <mxCell id="MkBecNQ7Hb0XB_extmmO-25" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="MkBecNQ7Hb0XB_extmmO-24" target="MkBecNQ7Hb0XB_extmmO-22">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="MkBecNQ7Hb0XB_extmmO-24" value="MoveCtrlData.DeserializeInitData(Reader reader)" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="785" y="1310" width="330" height="50" as="geometry" />
        </mxCell>
        <mxCell id="MkBecNQ7Hb0XB_extmmO-27" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="MkBecNQ7Hb0XB_extmmO-26" target="MkBecNQ7Hb0XB_extmmO-24">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="MkBecNQ7Hb0XB_extmmO-26" value="soUnit.DeserializeInitData(Reader reader)&lt;div&gt;各种so的基类函数&lt;/div&gt;" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="980" y="1080" width="310" height="50" as="geometry" />
        </mxCell>
        <mxCell id="MkBecNQ7Hb0XB_extmmO-29" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="MkBecNQ7Hb0XB_extmmO-28" target="MkBecNQ7Hb0XB_extmmO-26">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="MkBecNQ7Hb0XB_extmmO-28" value="C2SClientNewSceneObject.DeserializeSceneObjectInitData(SceneObject so, Reader reader)" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="870" y="980" width="530" height="40" as="geometry" />
        </mxCell>
        <mxCell id="MkBecNQ7Hb0XB_extmmO-31" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="MkBecNQ7Hb0XB_extmmO-30" target="MkBecNQ7Hb0XB_extmmO-28">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="MkBecNQ7Hb0XB_extmmO-30" value="C2SClientNewSceneObject.NewSceneObjects(byte[] data, uint size)&lt;div&gt;同步场景所有物体，反序列化加载数据&lt;/div&gt;" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="895" y="870" width="480" height="70" as="geometry" />
        </mxCell>
        <mxCell id="MkBecNQ7Hb0XB_extmmO-33" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="MkBecNQ7Hb0XB_extmmO-32" target="MkBecNQ7Hb0XB_extmmO-30">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="MkBecNQ7Hb0XB_extmmO-32" value="C2SClientProtocol.ProcessCreateSceneObjectAndDelete" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="940" y="765" width="390" height="50" as="geometry" />
        </mxCell>
        <mxCell id="MkBecNQ7Hb0XB_extmmO-35" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="MkBecNQ7Hb0XB_extmmO-34" target="MkBecNQ7Hb0XB_extmmO-32">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="MkBecNQ7Hb0XB_extmmO-34" value="OnNewFullSceneObject" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="920" y="650" width="230" height="50" as="geometry" />
        </mxCell>
        <mxCell id="MkBecNQ7Hb0XB_extmmO-37" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="MkBecNQ7Hb0XB_extmmO-36" target="MkBecNQ7Hb0XB_extmmO-32">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="MkBecNQ7Hb0XB_extmmO-36" value="OnNewSceneObject" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1250" y="630" width="150" height="60" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="A7umM8EDQ_CWWs76DqG0" name="WarModule">
    <mxGraphModel dx="1873" dy="2789" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="c0K3Uek04cy6gn6oDesz-1" value="WarModule.OnUserEnter&lt;div&gt;调用子类接口&lt;/div&gt;" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="150" y="790" width="330" height="90" as="geometry" />
        </mxCell>
        <mxCell id="c0K3Uek04cy6gn6oDesz-3" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="c0K3Uek04cy6gn6oDesz-2" target="c0K3Uek04cy6gn6oDesz-1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="c0K3Uek04cy6gn6oDesz-2" value="ServerWar._OnUserEnter&lt;div&gt;遍历所有mod&lt;/div&gt;&lt;div&gt;&lt;div&gt;foreach (var module in _listServerWarModule)&lt;/div&gt;&lt;div&gt;{&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; module.OnUserEnter(user, param);&lt;/div&gt;&lt;div&gt;}&lt;/div&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="65" y="550" width="500" height="170" as="geometry" />
        </mxCell>
        <mxCell id="c0K3Uek04cy6gn6oDesz-5" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="c0K3Uek04cy6gn6oDesz-4" target="c0K3Uek04cy6gn6oDesz-2">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="c0K3Uek04cy6gn6oDesz-4" value="ServerWar.UserEnter" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-20" y="370" width="290" height="60" as="geometry" />
        </mxCell>
        <mxCell id="c0K3Uek04cy6gn6oDesz-7" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="c0K3Uek04cy6gn6oDesz-6" target="c0K3Uek04cy6gn6oDesz-2">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="c0K3Uek04cy6gn6oDesz-6" value="&lt;div&gt;是ServerWar的子类&lt;/div&gt;ServerWarScuffle._OnUserEnter&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="510" y="350" width="220" height="90" as="geometry" />
        </mxCell>
        <mxCell id="c0K3Uek04cy6gn6oDesz-9" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="c0K3Uek04cy6gn6oDesz-8" target="c0K3Uek04cy6gn6oDesz-4">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="c0K3Uek04cy6gn6oDesz-8" value="&lt;div&gt;gameserver通知加入war，会在sceneserver创建user，但是不会加入到游戏世界中&lt;br&gt;&lt;/div&gt;&lt;b&gt;ServerWarUser&lt;/b&gt;.DoEnterWar(ServerWar war, UserEnterWarParam param)" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-137.5" y="220" width="525" height="80" as="geometry" />
        </mxCell>
        <mxCell id="c0K3Uek04cy6gn6oDesz-11" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="c0K3Uek04cy6gn6oDesz-10" target="c0K3Uek04cy6gn6oDesz-8">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="c0K3Uek04cy6gn6oDesz-10" value="&lt;div&gt;M2R_PROTOCOL.M2RSwitchMainMirror&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;S2MSer4verProtocol.OnSwitchMainMirror" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-270" y="-60" width="250" height="140" as="geometry" />
        </mxCell>
        <mxCell id="c0K3Uek04cy6gn6oDesz-13" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="c0K3Uek04cy6gn6oDesz-12" target="c0K3Uek04cy6gn6oDesz-8">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="c0K3Uek04cy6gn6oDesz-12" value="&lt;div&gt;M2R_PROTOCOL.M2RForceSwitchAllPlayerToMain&lt;br&gt;&lt;/div&gt;OnForceSwitchAllPlayerToMain" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="20" y="-60" width="300" height="125" as="geometry" />
        </mxCell>
        <mxCell id="c0K3Uek04cy6gn6oDesz-15" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="c0K3Uek04cy6gn6oDesz-14" target="c0K3Uek04cy6gn6oDesz-8">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="c0K3Uek04cy6gn6oDesz-14" value="GameRoom.CreateUserInLogicScene" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="390" y="-20" width="230" height="90" as="geometry" />
        </mxCell>
        <mxCell id="c0K3Uek04cy6gn6oDesz-16" value="&lt;div&gt;大乱斗，main场景不走这里&lt;/div&gt;GameRoom.PlayerEnterWar" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="680" y="120" width="200" height="70" as="geometry" />
        </mxCell>
        <mxCell id="c0K3Uek04cy6gn6oDesz-17" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1.003;entryY=0.65;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="c0K3Uek04cy6gn6oDesz-16" target="c0K3Uek04cy6gn6oDesz-8">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="c0K3Uek04cy6gn6oDesz-18" value="IWarModule.OnUserLeave" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1230" y="750" width="170" height="80" as="geometry" />
        </mxCell>
        <mxCell id="c0K3Uek04cy6gn6oDesz-20" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="c0K3Uek04cy6gn6oDesz-19" target="c0K3Uek04cy6gn6oDesz-18">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="c0K3Uek04cy6gn6oDesz-19" value="ServerWar._OnUserLeave" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1195" y="610" width="240" height="70" as="geometry" />
        </mxCell>
        <mxCell id="c0K3Uek04cy6gn6oDesz-22" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="c0K3Uek04cy6gn6oDesz-21" target="c0K3Uek04cy6gn6oDesz-19">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="c0K3Uek04cy6gn6oDesz-21" value="ServerWar.UserLeave" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1100" y="470" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="c0K3Uek04cy6gn6oDesz-24" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="c0K3Uek04cy6gn6oDesz-23" target="c0K3Uek04cy6gn6oDesz-21">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="c0K3Uek04cy6gn6oDesz-23" value="&lt;div&gt;玩家离开游戏服&lt;/div&gt;ServerWarUser.DoLeaveWar" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1045" y="320" width="260" height="60" as="geometry" />
        </mxCell>
        <mxCell id="c0K3Uek04cy6gn6oDesz-26" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="c0K3Uek04cy6gn6oDesz-25" target="c0K3Uek04cy6gn6oDesz-23">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="c0K3Uek04cy6gn6oDesz-25" value="ServerWar.ClearUserAndWar()" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1050" y="190" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="c0K3Uek04cy6gn6oDesz-28" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="c0K3Uek04cy6gn6oDesz-27" target="c0K3Uek04cy6gn6oDesz-23">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="c0K3Uek04cy6gn6oDesz-27" value="GameRoom.PlayerLeaveWar(GameRoomPlayer gameRoomPlayer, WAR_END_TYPE removeType)" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1270" y="185" width="530" height="70" as="geometry" />
        </mxCell>
        <mxCell id="c0K3Uek04cy6gn6oDesz-30" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="c0K3Uek04cy6gn6oDesz-29" target="c0K3Uek04cy6gn6oDesz-27">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="c0K3Uek04cy6gn6oDesz-29" value="GameRoom.RemovePlayer(ulong playerID, WAR_END_TYPE removeType)" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1360" y="65" width="440" height="65" as="geometry" />
        </mxCell>
        <mxCell id="c0K3Uek04cy6gn6oDesz-34" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="c0K3Uek04cy6gn6oDesz-31" target="c0K3Uek04cy6gn6oDesz-25">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="c0K3Uek04cy6gn6oDesz-31" value="GameRoom.UnInit()" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1050" y="70" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="c0K3Uek04cy6gn6oDesz-35" value="&lt;div&gt;玩家掉线&lt;/div&gt;IWarModule.OnUserOffline" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="170" y="2280" width="170" height="50" as="geometry" />
        </mxCell>
        <mxCell id="c0K3Uek04cy6gn6oDesz-37" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="c0K3Uek04cy6gn6oDesz-36" target="c0K3Uek04cy6gn6oDesz-35">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="c0K3Uek04cy6gn6oDesz-36" value="ServerWar.UserOffline(ServerWarUser user)" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="125" y="2180" width="260" height="40" as="geometry" />
        </mxCell>
        <mxCell id="c0K3Uek04cy6gn6oDesz-39" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="c0K3Uek04cy6gn6oDesz-38" target="c0K3Uek04cy6gn6oDesz-36">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="c0K3Uek04cy6gn6oDesz-38" value="GameRoom.PlayerDetach(long session)" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="140" y="2070" width="230" height="40" as="geometry" />
        </mxCell>
        <mxCell id="c0K3Uek04cy6gn6oDesz-41" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="c0K3Uek04cy6gn6oDesz-40" target="c0K3Uek04cy6gn6oDesz-38">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="c0K3Uek04cy6gn6oDesz-40" value="GameRoome.UnInit()&lt;div&gt;在OnUserLeave之后调用Offline&lt;/div&gt;" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="20" y="1930" width="230" height="90" as="geometry" />
        </mxCell>
        <mxCell id="c0K3Uek04cy6gn6oDesz-43" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="c0K3Uek04cy6gn6oDesz-42" target="c0K3Uek04cy6gn6oDesz-38">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="c0K3Uek04cy6gn6oDesz-42" value="GameRoom.PlayerAttach&lt;div&gt;失败时调用反初始化&lt;/div&gt;" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="290" y="1860" width="240" height="80" as="geometry" />
        </mxCell>
        <mxCell id="c0K3Uek04cy6gn6oDesz-45" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.75;entryDx=0;entryDy=0;" edge="1" parent="1" source="c0K3Uek04cy6gn6oDesz-44" target="c0K3Uek04cy6gn6oDesz-38">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="c0K3Uek04cy6gn6oDesz-44" value="&lt;div&gt;掉线入口&lt;/div&gt;GameRoomManager.UnBindSession(long sessionId)" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="600" y="1950" width="310" height="70" as="geometry" />
        </mxCell>
        <mxCell id="c0K3Uek04cy6gn6oDesz-47" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="c0K3Uek04cy6gn6oDesz-46" target="c0K3Uek04cy6gn6oDesz-44">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="c0K3Uek04cy6gn6oDesz-46" value="S2CServerProtocol.OnClosed(long sessionID, string sessionName, N4CS_CLOSE_FLAG closeFlag)" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="440" y="1670" width="550" height="80" as="geometry" />
        </mxCell>
        <mxCell id="c0K3Uek04cy6gn6oDesz-49" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.75;entryDx=0;entryDy=0;" edge="1" parent="1" source="c0K3Uek04cy6gn6oDesz-48" target="c0K3Uek04cy6gn6oDesz-44">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="c0K3Uek04cy6gn6oDesz-48" value="GameRoomManager.BindSessionToPlayer&lt;div&gt;失败反初始化&lt;/div&gt;" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1080" y="1680" width="250" height="90" as="geometry" />
        </mxCell>
        <mxCell id="c0K3Uek04cy6gn6oDesz-51" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.75;entryDx=0;entryDy=0;" edge="1" parent="1" source="c0K3Uek04cy6gn6oDesz-50" target="c0K3Uek04cy6gn6oDesz-44">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="c0K3Uek04cy6gn6oDesz-50" value="GameRoomManager.CheckClients&lt;div&gt;ping超时&lt;/div&gt;" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1215" y="1850" width="200" height="80" as="geometry" />
        </mxCell>
        <mxCell id="c0K3Uek04cy6gn6oDesz-53" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="c0K3Uek04cy6gn6oDesz-52" target="c0K3Uek04cy6gn6oDesz-46">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="c0K3Uek04cy6gn6oDesz-52" value="N4CSListener.OnCSClosed" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="610" y="1540" width="210" height="70" as="geometry" />
        </mxCell>
        <mxCell id="c0K3Uek04cy6gn6oDesz-54" value="IWarModule.OnUserReady" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="2080" y="2140" width="200" height="80" as="geometry" />
        </mxCell>
        <mxCell id="c0K3Uek04cy6gn6oDesz-56" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="c0K3Uek04cy6gn6oDesz-55" target="c0K3Uek04cy6gn6oDesz-54">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="c0K3Uek04cy6gn6oDesz-55" value="ServerWar._OnUserReady&lt;div&gt;遍历所有模块，调用接口&amp;nbsp;&lt;/div&gt;" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="2070" y="2020" width="170" height="50" as="geometry" />
        </mxCell>
        <mxCell id="c0K3Uek04cy6gn6oDesz-58" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="c0K3Uek04cy6gn6oDesz-57" target="c0K3Uek04cy6gn6oDesz-55">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="c0K3Uek04cy6gn6oDesz-57" value="ServerWar.UserReady(ServerWarUser user)" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="2010" y="1920" width="270" height="70" as="geometry" />
        </mxCell>
        <mxCell id="c0K3Uek04cy6gn6oDesz-60" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="c0K3Uek04cy6gn6oDesz-59" target="c0K3Uek04cy6gn6oDesz-57">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="c0K3Uek04cy6gn6oDesz-59" value="_SceneReadyContinue&lt;div&gt;场景加载完成&lt;/div&gt;" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="2010" y="1790" width="230" height="50" as="geometry" />
        </mxCell>
        <mxCell id="c0K3Uek04cy6gn6oDesz-62" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="c0K3Uek04cy6gn6oDesz-61" target="c0K3Uek04cy6gn6oDesz-59">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="c0K3Uek04cy6gn6oDesz-61" value="ServerWarUser._DoSceneReady()" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1980" y="1680" width="220" height="60" as="geometry" />
        </mxCell>
        <mxCell id="c0K3Uek04cy6gn6oDesz-64" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="c0K3Uek04cy6gn6oDesz-63" target="c0K3Uek04cy6gn6oDesz-61">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="c0K3Uek04cy6gn6oDesz-63" value="ServerWarUser.OnSceneReady()" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1980" y="1560" width="230" height="70" as="geometry" />
        </mxCell>
        <mxCell id="c0K3Uek04cy6gn6oDesz-66" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="c0K3Uek04cy6gn6oDesz-65" target="c0K3Uek04cy6gn6oDesz-63">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="c0K3Uek04cy6gn6oDesz-65" value="&lt;div&gt;C2S_PROTOCOL.C2SSceneReady&lt;br&gt;&lt;/div&gt;S2CServerProtocol.OnSceneReady" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1965" y="1430" width="260" height="80" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="yY8y8KLqNe561Y083Ux7" name="客户端输入模块">
    <mxGraphModel dx="2488" dy="1620" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="QsB9IsXE9MGjs1GirQlp-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="QsB9IsXE9MGjs1GirQlp-1" target="QsB9IsXE9MGjs1GirQlp-2">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="QsB9IsXE9MGjs1GirQlp-1" value="CommandSystem.cs&lt;div&gt;List&amp;lt;Cmd&amp;gt; _continueTriggerLogicCmd = new List&amp;lt;Cmd&amp;gt;(64);//需要持续触发的命令&lt;/div&gt;" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="300" y="1020" width="480" height="60" as="geometry" />
        </mxCell>
        <mxCell id="QsB9IsXE9MGjs1GirQlp-5" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="QsB9IsXE9MGjs1GirQlp-2" target="QsB9IsXE9MGjs1GirQlp-4">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="QsB9IsXE9MGjs1GirQlp-2" value="CommandSystem.Update()&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="345" y="1100" width="390" height="40" as="geometry" />
        </mxCell>
        <mxCell id="QsB9IsXE9MGjs1GirQlp-4" value="InputActionManager.TriggerCommand(Cmd cmd)" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="380" y="1180" width="320" height="30" as="geometry" />
        </mxCell>
        <mxCell id="QsB9IsXE9MGjs1GirQlp-7" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="QsB9IsXE9MGjs1GirQlp-6" target="QsB9IsXE9MGjs1GirQlp-1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="QsB9IsXE9MGjs1GirQlp-6" value="CommandSystem.void EnableCmd(Cmd cmd)" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="415" y="950" width="250" height="40" as="geometry" />
        </mxCell>
        <mxCell id="QsB9IsXE9MGjs1GirQlp-9" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="QsB9IsXE9MGjs1GirQlp-8" target="QsB9IsXE9MGjs1GirQlp-6">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="QsB9IsXE9MGjs1GirQlp-8" value="CommandSystem.void EnableCmd(LogicCmd logicCmd, bool isAutoTrigger = true)" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="20" y="870" width="460" height="40" as="geometry" />
        </mxCell>
        <mxCell id="QsB9IsXE9MGjs1GirQlp-11" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="QsB9IsXE9MGjs1GirQlp-10" target="QsB9IsXE9MGjs1GirQlp-6">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="QsB9IsXE9MGjs1GirQlp-10" value="CommandSystem.ResetCmd(LogicCmd logicCmd)" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="590" y="860" width="280" height="40" as="geometry" />
        </mxCell>
        <mxCell id="QsB9IsXE9MGjs1GirQlp-13" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="QsB9IsXE9MGjs1GirQlp-12" target="QsB9IsXE9MGjs1GirQlp-10">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="QsB9IsXE9MGjs1GirQlp-12" value="CommandManager.ResetCmd" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="650" y="770" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="QsB9IsXE9MGjs1GirQlp-17" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="QsB9IsXE9MGjs1GirQlp-14" target="QsB9IsXE9MGjs1GirQlp-8">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="QsB9IsXE9MGjs1GirQlp-14" value="CommandSystem.AddCmd(InputCmdInfo cmdInfo, bool isEnable, bool isAutoTrigger = true)" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-420" y="720" width="530" height="60" as="geometry" />
        </mxCell>
        <mxCell id="QsB9IsXE9MGjs1GirQlp-16" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="QsB9IsXE9MGjs1GirQlp-15" target="QsB9IsXE9MGjs1GirQlp-8">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="QsB9IsXE9MGjs1GirQlp-15" value="CommandSystem.EnableAllCmd()" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="150" y="720" width="190" height="40" as="geometry" />
        </mxCell>
        <mxCell id="QsB9IsXE9MGjs1GirQlp-19" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="QsB9IsXE9MGjs1GirQlp-18" target="QsB9IsXE9MGjs1GirQlp-8">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="QsB9IsXE9MGjs1GirQlp-18" value="CommandSystem.void EnableCmd(int cmdKey, bool isAutoTrigger = true)" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="360" y="720" width="410" height="30" as="geometry" />
        </mxCell>
        <mxCell id="QsB9IsXE9MGjs1GirQlp-22" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="QsB9IsXE9MGjs1GirQlp-21" target="QsB9IsXE9MGjs1GirQlp-15">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="QsB9IsXE9MGjs1GirQlp-21" value="CommandManager.ClearAllForbidden()" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="100" y="570" width="220" height="50" as="geometry" />
        </mxCell>
        <mxCell id="QsB9IsXE9MGjs1GirQlp-24" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="QsB9IsXE9MGjs1GirQlp-23" target="QsB9IsXE9MGjs1GirQlp-14">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="QsB9IsXE9MGjs1GirQlp-23" value="CommandManager.AddCmd(InputCmdInfo cmdInfo, bool isAutoTrigger = true)" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-500" y="620" width="450" height="40" as="geometry" />
        </mxCell>
        <mxCell id="QsB9IsXE9MGjs1GirQlp-26" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="QsB9IsXE9MGjs1GirQlp-25" target="QsB9IsXE9MGjs1GirQlp-23">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="QsB9IsXE9MGjs1GirQlp-25" value="CommandManager.AddGroup(Dictionary&amp;lt;string, InputCmdInfo&amp;gt; cmdName2CmdInfo, bool isAutoTrigger = true)" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-660" y="530" width="610" height="50" as="geometry" />
        </mxCell>
        <mxCell id="QsB9IsXE9MGjs1GirQlp-28" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="QsB9IsXE9MGjs1GirQlp-27" target="QsB9IsXE9MGjs1GirQlp-25">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="QsB9IsXE9MGjs1GirQlp-27" value="CommandManager.AddMechaGroup(InputCmdGroupInfo group, bool isAutoTrigger = true)" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-880" y="410" width="500" height="70" as="geometry" />
        </mxCell>
        <mxCell id="QsB9IsXE9MGjs1GirQlp-30" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="QsB9IsXE9MGjs1GirQlp-29" target="QsB9IsXE9MGjs1GirQlp-27">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="QsB9IsXE9MGjs1GirQlp-29" value="CommandManager.AddMechaGroup(string groupName, bool isAutoTrigger = true)" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-1030" y="310" width="450" height="60" as="geometry" />
        </mxCell>
        <mxCell id="QsB9IsXE9MGjs1GirQlp-32" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="QsB9IsXE9MGjs1GirQlp-31" target="QsB9IsXE9MGjs1GirQlp-27">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="QsB9IsXE9MGjs1GirQlp-31" value="OnSwitchControllerSo" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-440" y="320" width="170" height="50" as="geometry" />
        </mxCell>
        <mxCell id="QsB9IsXE9MGjs1GirQlp-34" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="QsB9IsXE9MGjs1GirQlp-33" target="QsB9IsXE9MGjs1GirQlp-29">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="QsB9IsXE9MGjs1GirQlp-33" value="CommandManager.void SwitchInputGroup(string groupName)//切换输入组" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-1025" y="230" width="440" height="40" as="geometry" />
        </mxCell>
        <mxCell id="QsB9IsXE9MGjs1GirQlp-36" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="QsB9IsXE9MGjs1GirQlp-35" target="QsB9IsXE9MGjs1GirQlp-18">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="QsB9IsXE9MGjs1GirQlp-35" value="各个功能模块启用相关的按键组" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="470" y="590" width="210" height="50" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
